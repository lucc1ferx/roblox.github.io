!function(){"use strict";var e={n:function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,{a:n}),n},d:function(t,n){for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t=jQuery,n=e.n(t),a=Roblox;function o(e){var t=new(n().Deferred);return a.Hybrid.Game.launchGame(e,(function(){t.resolve(e)})),t}var r,i,l={isJoinAttemptIdEnabled:!1,joinMultiplayerGame:function(e){var t=!0===e.isPlayTogetherGame;t={requestType:a.Hybrid.Game.LAUNCH_MODES.SIMPLE_GAME,placeId:e.placeId.toString(),isPlayTogetherGame:t,browserTrackerId:a.Cookies.getBrowserTrackerId()};return e.joinAttemptId&&(t.joinAttemptId=e.joinAttemptId),e.joinAttemptOrigin&&(t.joinAttemptOrigin=e.joinAttemptOrigin),o(t)},followPlayerIntoGame:function(e){var t={requestType:a.Hybrid.Game.LAUNCH_MODES.FOLLOW_USER,userId:e.userId.toString(),browserTrackerId:a.Cookies.getBrowserTrackerId()};return e.joinAttemptId&&(t.joinAttemptId=e.joinAttemptId),e.joinAttemptOrigin&&(t.joinAttemptOrigin=e.joinAttemptOrigin),o(t)},joinGameInstance:function(e){var t=!0===e.isPlayTogetherGame;t={requestType:a.Hybrid.Game.LAUNCH_MODES.GAME_INSTANCE,placeId:e.placeId.toString(),instanceId:e.gameId,isPlayTogetherGame:t,browserTrackerId:a.Cookies.getBrowserTrackerId()};return e.joinAttemptId&&(t.joinAttemptId=e.joinAttemptId),e.joinAttemptOrigin&&(t.joinAttemptOrigin=e.joinAttemptOrigin),o(t)},joinPrivateGame:function(e){var t={requestType:a.Hybrid.Game.LAUNCH_MODES.PRIVATE_SERVER,placeId:e.placeId.toString(),accessCode:e.accessCode,browserTrackerId:a.Cookies.getBrowserTrackerId()};return e.joinAttemptId&&(t.joinAttemptId=e.joinAttemptId),e.joinAttemptOrigin&&(t.joinAttemptOrigin=e.joinAttemptOrigin),o(t)},playTogetherGame:function(e){var t={requestType:a.Hybrid.Game.LAUNCH_MODES.SIMPLE_GAME,placeId:e.placeId.toString(),conversationId:e.conversationId.toString(),browserTrackerId:a.Cookies.getBrowserTrackerId()};return e.joinAttemptId&&(t.joinAttemptId=e.joinAttemptId),e.joinAttemptOrigin&&(t.joinAttemptOrigin=e.joinAttemptOrigin),o(t)}},c="soli-modal",s="/login?returnurl=",d="/?returnurl=",u="gameDetails",p="gameLaunch_login",m="gameLaunch_signup";n()(document).ready((function(){r=new a.TranslationResourceProvider,i=r.getTranslationResource("Feature.GameLaunchGuestMode")}));var v={restrictGuests:function(e){var t=new(n().Deferred);return"True"===n()("#PlaceLauncherStatusPanel").data("is-user-logged-in")?t.resolve(e):a.Dialog.open({titleText:i.get("Heading.Dialog.SignUpOrLogin"),bodyContent:i.get("Description.Dialog.SignUpOrLogin"),cssClass:c,acceptColor:a.Dialog.green,acceptText:i.get("Action.Dialog.SignUp"),declineText:i.get("Action.Dialog.Login"),onDecline:function(){a.FormEvents&&a.FormEvents.SendInteractionClick(u,p);var e=s+encodeURIComponent(window.location.pathname+window.location.search);window.location.href=a.Endpoints?a.Endpoints.getAbsoluteUrl(e):e},onAccept:function(){var e;e=m,a.FormEvents&&a.FormEvents.SendInteractionClick("gameDetails",e),e=d+encodeURIComponent(window.location.pathname+window.location.search),window.location.href=a.Endpoints?a.Endpoints.getAbsoluteUrl(e):e}}),t}},g=CoreUtilities,h={bars:[],init:function(e,t,n,a){var o=this.get(e);null==o&&(o={}),o.barID=e,o.innerBarID=t,o.percentageID=n,void 0===a&&(o.percentComplete=0),this.bars.push(o),this.update(e,o.percentComplete)},get:function(e){for(var t=0;t<this.bars.length;t+=1)if(this.bars[t].barID===e)return this.bars[t];return null},dispose:function(e){for(var t=0;t<this.bars.length;t+=1)this.bars[t].barID===e&&this.bars.splice(t,1)},update:function(e,t){var a=this.get(e);a&&(1<t&&(t=1),e=n()("#".concat(e)).width(),e=Math.round(e*t),n()("#".concat(a.innerBarID)).animate({width:e},200,"swing"),a.percentageID&&0<n()("#".concat(a.percentageID)).length&&n()("#".concat(a.percentageID)).html("".concat(Math.round(100*t),"%")),a.percentComplete=t)}},f={newValue:"",showVideoPreRoll:!1,videoInitialized:!1,videoStarted:!1,videoCompleted:!1,videoSkipped:!1,videoCancelled:!1,videoErrored:!1,loadingBarMaxTime:3e4,loadingBarCurrentTime:0,loadingBarIntervalID:0,loadingBarID:"videoPrerollLoadingBar",loadingBarInnerID:"videoPrerollLoadingBarCompleted",loadingBarPercentageID:"videoPrerollLoadingPercent",videoDiv:"videoPrerollMainDiv",companionAdDiv:"videoPrerollCompanionAd",contentElement:"contentElement",videoLoadingTimeout:7e3,videoPlayingTimeout:23e3,videoLogNote:"",logsEnabled:!1,includedPlaceIds:"",isSwfPreloaderEnabled:!1,isFlashInstalled:!1,isPrerollShownEveryXMinutesEnabled:!1,isAgeTargetingEnabled:!0,isAgeOrSegmentTargetingEnabled:!1,adUnit:"",adTime:0,placeId:0,customTargeting:{userAge:"",userAgeOrSegment:"",userGender:"",gameGenres:"",environment:"",adTime:"",PLVU:!1},adsManager:null,adsLoader:null,adDisplayContainer:null,intervalTimer:null,videoContent:null,isCompanionAdRenderedByGoogleTag:!1};function b(){f.adsLoader.contentComplete()}function y(){f.videoContent=document.getElementById(f.contentElement)}function w(){f.adDisplayContainer=new window.google.ima.AdDisplayContainer(document.getElementById(f.videoDiv),f.videoContent)}function I(){var e="&iu=".concat(f.adUnit),t="";return f.isAgeTargetingEnabled&&(t+="&Age=".concat(f.customTargeting.userAge)),f.isAgeOrSegmentTargetingEnabled&&(t+="&A=".concat(f.customTargeting.userAgeOrSegment)),t=encodeURIComponent("Env=".concat(f.customTargeting.environment,"&Gender=").concat(f.customTargeting.userGender).concat(t,"&Genres=").concat(f.customTargeting.gameGenres,"&PlaceID=").concat(f.placeId,"&Time=").concat(f.customTargeting.adTime,"&PLVU=").concat(f.customTargeting.PLVU)),"".concat("http://pubads.g.doubleclick.net/gampad/ads?impl=s&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1&url=[referrer_url]&description_url=[description_url]&correlator=[timestamp]").concat("&sz=400x300").concat(e).concat("&ciu_szs=300x250","&cust_params=").concat(t,"&")}function P(){window.googletag.defineSlot(f.adUnit,[300,250],f.companionAdDiv).addService(window.googletag.companionAds()),window.googletag.enableServices(),window.googletag.display(f.companionAdDiv)}function C(e){switch(e.type){case window.google.ima.AdEvent.Type.LOADED:break;case window.google.ima.AdEvent.Type.STARTED:if(f.videoStarted=!0,f.isCompanionAdRenderedBywindow.googletag){if(!window.googletag)break;window.googletag.cmd.push(P)}else{var t=e.getAd().getCompanionAds(300,250);0<t.length&&(t=t[0].getContent(),document.getElementById(f.companionAdDiv).innerHTML=t)}break;case window.google.ima.AdEvent.Type.SKIPPED:f.videoCompleted=!0,f.videoSkipped=!0,f.showVideoPreRoll=!1;break;case window.google.ima.AdEvent.Type.COMPLETE:f.videoStarted&&!1===f.videoCancelled&&(f.videoCompleted=!0,f.showVideoPreRoll=!1,""!==f.newValue&&n().cookie("RBXVPR",f.newValue,180))}}function E(){f.videoErrored=!0,f.videoCompleted=!0,f.videoLogNote="AdError"}function A(e){f.adsManager=e.getAdsManager(f.videoContent),f.adsManager.addEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR,E),f.adsManager.addEventListener(window.google.ima.AdEvent.Type.ALL_ADS_COMPLETED,C),f.adsManager.addEventListener(window.google.ima.AdEvent.Type.LOADED,C),f.adsManager.addEventListener(window.google.ima.AdEvent.Type.STARTED,C),f.adsManager.addEventListener(window.google.ima.AdEvent.Type.SKIPPED,C),f.adsManager.addEventListener(window.google.ima.AdEvent.Type.COMPLETE,C);try{f.adsManager.init(400,300,window.google.ima.ViewMode.NORMAL),f.adsManager.start()}catch(e){E()}}function S(){window.google.ima.settings.setVpaidAllowed(!0),y(),w(),f.adDisplayContainer.initialize(),f.adsLoader=new window.google.ima.AdsLoader(f.adDisplayContainer),f.adsLoader.addEventListener(window.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,A,!1),f.adsLoader.addEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR,E,!1),f.videoContent.addEventListener("ended",b);var e=new window.google.ima.AdsRequest,t=I();e.adTagUrl=t,e.linearAdSlotWidth=400,e.linearAdSlotHeight=300,e.nonLinearAdSlotWidth=400,e.nonLinearAdSlotHeight=300,f.adsLoader.requestAds(e)}function L(){var e=!1;try{new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(e=!0)}catch(t){navigator.mimeTypes&&void 0!==navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(e=!0)}return e}function T(){if(f.logsEnabled){var e="";if(f.videoCompleted)e="Complete",""===f.videoLogNote&&(f.videoLogNote="NoTimeout"),f.logsEnabled=!1;else if(f.videoCancelled)e="Cancelled",f.videoLogNote=window.RobloxLaunch.state;else{if(!1!==f.videoInitialized||""===f.videoLogNote)return;e="Failed",f.logsEnabled=!1}a.GaEventSettings.gaDFPPreRollEnabled&&window.GoogleAnalyticsEvents&&window.GoogleAnalyticsEvents.FireEvent(["DFPPreRoll",e,f.videoLogNote])}}function D(){return!!f.videoInitialized&&(f.videoInitialized&&!f.videoStarted&&f.loadingBarCurrentTime>f.videoLoadingTimeout&&(f.videoCompleted=!0,f.videoLogNote="LoadingTimeout"),f.videoStarted&&!f.videoCompleted&&f.loadingBarCurrentTime>f.videoPlayingTimeout&&(f.videoCompleted=!0,f.videoLogNote="PlayingTimeout"),!f.videoCompleted)}function G(){var e=encodeURIComponent(I());e="adTagUrl=".concat(e);n().ajax({url:"/game/preloader",data:{url:e},method:"GET",crossDomain:!0,xhrFields:{withCredentials:!0}}).success((function(e){n()("#videoPrerollMainDiv").html(e),f.videoErrored||(f.videoStarted=!0)}))}function x(){n().ajax({url:"/game/updateprerollcount",method:"GET",crossDomain:!0,xhrFields:{withCredentials:!0}})}Object.assign(f,{contentEndedListener:b,createVideoContent:y,createAdDisplayContainer:w,constructUrl:I,renderCompanionAd:P,onAdEvent:C,onAdError:E,onAdsManagerLoaded:A,requestAds:S,checkFlashEnabled:L,checkEligibility:function(){f.showVideoPreRoll&&(L()&&(f.isFlashInstalled=!0),"True"===n()("#PlaceLauncherStatusPanel").data("is-protocol-handler-launch-enabled")||a.Client.IsRobloxInstalled()?void 0===window.google||void 0===window.google.ima?(f.videoLogNote="NoGoogle",f.showVideoPreRoll=!1):a.Client.isIDE()?(f.videoLogNote="RobloxStudio",f.showVideoPreRoll=!1):a.Client.isRobloxBrowser()?(f.videoLogNote="RobloxPlayer",f.showVideoPreRoll=!1):(window.chrome||window.safari)&&"#chromeInstall"===window.location.hash&&(f.showVideoPreRoll=!1):f.showVideoPreRoll=!1)},logVideoPreRoll:T,isPlaying:D,correctIEModalPosition:function(e){var t,a;e.container.innerHeight()<=30&&(t=n()("#videoPrerollPanel"),a=-Math.floor(t.innerHeight()/2),t.css({position:"relative",top:"".concat(a,"px")}),e.container.find(".VprCloseButton").css({top:"".concat(a-10,"px"),"z-index":"1003"}))},renderImaPreloader:G,updatePrerollCount:x,start:function(){0===f.placeId&&"undefined"!=typeof play_placeId&&(f.placeId=play_placeId),f.videoInitialized=!0,f.videoStarted=!1,f.videoCancelled=!1,f.videoCompleted=!1,f.videoSkipped=!1,f.loadingBarCurrentTime=0,f.videoLogNote="",h.init(f.loadingBarID,f.loadingBarInnerID,f.loadingBarPercentageID),f.loadingBarIntervalID=setInterval((function(){f.loadingBarCurrentTime+=1e3,h.update(f.loadingBarID,f.loadingBarCurrentTime/f.loadingBarMaxTime)}),1e3),(f.isSwfPreloaderEnabled&&f.isFlashInstalled?G:S)()},cancel:function(){f.videoCancelled=!0,n().modal.close()},skip:function(){f.videoCompleted=!0,f.videoSkipped=!0,f.showVideoPreRoll=!1},close:function(){window.MadStatus&&window.MadStatus.running&&window.MadStatus.stop(""),window.RobloxLaunch.launcher&&(window.RobloxLaunch.launcher._cancelled=!0),clearInterval(f.loadingBarIntervalID),h.dispose(f.loadingBarID),D()&&(f.videoCancelled=!0),n().modal.close(),T(),f.isPrerollShownEveryXMinutesEnabled&&f.videoInitialized&&f.videoCompleted&&x()}});var O=f,U={waitForPreroll:function(e){var t,a,o=new(n().Deferred),r=O;return r.placeId=void 0!==e.placeId?e.placeId:0,r.showVideoPreRoll?(t={escClose:!0,opacity:80,overlayCss:{backgroundColor:"#000"},zIndex:1031,onShow:function(e){r.correctIEModalPosition(e),r.start(),n()("#prerollClose").hide(),n()("#prerollClose").delay(1e3*r.adTime).show(300)},onClose:function(){r.close()},closeHTML:'<a href="#" id="prerollClose" class="ImageButton closeBtnCircle_35h ABCloseCircle VprCloseButton"></a>'},n()("#videoPrerollPanel").modal(t),a=setInterval((function(){r.isPlaying()||(n().modal.close(),clearInterval(a),r.videoCancelled?o.reject(e):o.resolve(e))}),200)):(o.resolve(e),r.logVideoPreRoll()),o}};function R(e,t,n,a,o,r,i){try{var l=e[r](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(a,o)}function j(e,t){var n,a=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)),a}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){var a,o;a=e,t=n[o=t],o in a?Object.defineProperty(a,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[o]=t})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var B,M={gameLaunchInterface:null,gameLaunchLogger:null,initialized:new Promise((function(e,t){B=e}))};function V(e,t,n){return t=k(k({},e),{},{joinAttemptId:null!=t?t:g.uuidService.generateRandomUuid()}),n&&(t.joinAttemptOrigin=n),t}function N(e,t,n){var o,r;3<arguments.length&&void 0!==arguments[3]&&arguments[3]&&4<arguments.length&&void 0!==arguments[4]&&arguments[4]&&(o=e,r={url:"".concat(a.EnvironmentUrls.gameJoinApi,"/v1/team-create-preemptive"),withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}},o={gameJoinAttemptId:g.uuidService.generateRandomUuid(),placeId:o},g.httpService.post(r,o)),M.gameLaunchInterface.editGameInStudio(e,t,n)}function F(e){var t=3<arguments.length?arguments[3]:void 0,n=4<arguments.length?arguments[4]:void 0;e={placeId:e,isPlayTogetherGame:!0===(2<arguments.length?arguments[2]:void 0)};return M.gameLaunchInterface.isJoinAttemptIdEnabled&&(e=V(e,t,n)),v.restrictGuests(e).then(U.waitForPreroll).then(M.gameLaunchInterface.joinMultiplayerGame)}function _(){var e;return e=regeneratorRuntime.mark((function e(t,n,a,o,r){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.initialized;case 2:return i={placeId:t,accessCode:n,linkCode:a},M.gameLaunchInterface.isJoinAttemptIdEnabled&&(i=V(i,o,r)),i=U.waitForPreroll(i).then(M.gameLaunchInterface.joinPrivateGame),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})),(_=function(){var t=this,n=arguments;return new Promise((function(a,o){var r=e.apply(t,n);function i(e){R(r,a,o,i,l,"next",e)}function l(e){R(r,a,o,i,l,"throw",e)}i(void 0)}))}).apply(this,arguments)}n().fn.bindGameLaunch=function(){return this.find(".VisitButtonPlayGLI").click((function(){var e=n()(this);F(e.attr("placeid"),e.data("is-membership-level-ok"))})),this.find(".VisitButtonEditGLI").click((function(){var e=n()(this);N(e.attr("placeid"),e.data("universeid"),!!e.data("allowupload"))})),this},n()(document).ready((function(){n()("body").bindGameLaunch()})),Object.assign(M,{authenticationChecker:v,prerollPlayer:U,joinMultiplayerGame:F,openStudio:function(){M.gameLaunchInterface.openStudio()},openPluginInStudio:function(e){M.gameLaunchInterface.openPluginInStudio(e)},editGameInStudio:N,followPlayerIntoGame:function(e,t,n){return e={userId:e},M.gameLaunchInterface.isJoinAttemptIdEnabled&&(e=V(e,t,n)),v.restrictGuests(e).then(U.waitForPreroll).then(M.gameLaunchInterface.followPlayerIntoGame)},joinGameInstance:function(e,t,n,a,o,r){return a={placeId:e,gameId:t,isPlayTogetherGame:!0===a},M.gameLaunchInterface.isJoinAttemptIdEnabled&&(a=V(a,o,r)),v.restrictGuests(a).then(U.waitForPreroll).then(M.gameLaunchInterface.joinGameInstance)},joinPrivateGame:function(e,t,n,a,o){return _.apply(this,arguments)},playTogetherGame:function(e,t,n,a){return t={placeId:e,conversationId:t},M.gameLaunchInterface.isJoinAttemptIdEnabled&&(t=V(t,n,a)),v.restrictGuests(t).then(U.waitForPreroll).then(M.gameLaunchInterface.playTogetherGame)},setGameLaunchInterface:function(e){M.gameLaunchInterface=e,B()},setGameLaunchLogger:function(e){M.gameLaunchLogger=e},tryAssetInStudio:function(e){M.gameLaunchInterface.tryAssetInStudio(e)},isJoinAttemptIdEnabled:function(){var e;return null===(e=M.gameLaunchInterface)||void 0===e?void 0:e.isJoinAttemptIdEnabled},startClientAttemptedEvent:"startClientAttempted",startClientFailedEvent:"startClientFailed",startClientSucceededEvent:"startClientSucceeded",beginInstallEvent:"beginInstall",successfulInstallEvent:"successfulInstall",manualDownloadEvent:"manualDownload"});var H=M,q={lastContext:"unknown",contextCategories:{joinUser:"JoinUser"}};function J(e,t,o,r,i){null!==t&&""!==t&&"unknown"!==t&&(q.lastContext=t),a.EventStream.SendEvent(e,q.lastContext,function(e,t,a){var o,r=n()("#PlaceLauncherStatusPanel");return{lType:r&&r.data("is-protocol-handler-launch-enabled")&&"true"===r.data("is-protocol-handler-launch-enabled").toLowerCase()?"protocol":"plugin",pid:e,refuid:t,pg:(o=window.location.pathname.toLowerCase(),e="profile",-1!==(t=o.lastIndexOf(e))&&o.length===t+e.length?e:0===o.indexOf("/develop")?"develop":0===o.indexOf("/discover")?"games":"gameDetail"),joinAttemptId:"True"===(null!==(r=r.data("is-join-attempt-id-enabled"))&&void 0!==r?r:"False")?a:void 0}}(o,r,i))}Object.assign(q,{SendGamePlayIntent:function(e,t,a,o){J("gamePlayIntent",e,t,a,o),n()(document).trigger("playButton:gamePlayIntent")},SendDevelopIntent:function(e,t){J("developIntent",e,t)},SendInstallBegin:function(e,t){J("installBegin",e,t)},SendInstallSuccess:function(e,t){J("installSuccess",e,t)},SendClientStartAttempt:function(e,t){J("clientStartAttempt",e,t)},SendClientStartSuccessWeb:function(e,t){J("clientStartSuccessWeb",e,t)},SendManualDownloadClick:function(e,t){J("manualDownload",e,t)}});var W=q,z={logToConsoleEnabled:!1,logToGAEnabled:!0,logToEphemeralCountersEnabled:!0},X={};X[H.startClientAttemptedEvent]=["GameLaunchAttempt_<os>","GameLaunchAttempt_<os>_<launchmethod>"],X[H.startClientSucceededEvent]=["GameLaunchSuccessWeb_<os>","GameLaunchSuccessWeb_<os>_<launchmethod>"];var K={};a.GaEventSettings.gaLaunchAttemptAndLaunchSuccessEnabled&&(K[H.startClientAttemptedEvent]="Launch Attempt",K[H.startClientSucceededEvent]="Launch Success"),K[H.beginInstallEvent]="Install Begin",K[H.successfulInstallEvent]="Install Success",K[H.manualDownloadEvent]="Manual Download";var Y={};function Q(e){z.logToConsoleEnabled&&console.log(e)}function Z(e,t){var a;z.logToEphemeralCountersEnabled&&("Windows"===(a=n()("#PlaceLauncherStatusPanel").data("os-name"))&&(a="Win32"),e=(e=e.replace("<os>",a)).replace("<launchmethod>",t),null!==(t=window.EventTracker)&&void 0!==t&&t.fireEvent&&window.EventTracker.fireEvent(e))}function $(e,t,n,a){void 0!==window.GoogleAnalyticsEvents&&z.logToGAEnabled&&window.GoogleAnalyticsEvents.FireEvent&&window.GoogleAnalyticsEvents.FireEvent([e,t,n,a])}function ee(e,t){Q("".concat(e.type,": ").concat(JSON.stringify(t))),X[e.type]&&n().each(X[e.type],(function(e,n){Z(n,t.launchMethod)})),K[e.type]&&$(t.launchMethod,K[e.type],t.params.launchMode,0),"True"===n()("#PlaceLauncherStatusPanel").data("event-stream-for-protocol-enabled")&&Y[e.type]&&Y[e.type](null,t.params.placeId)}Y[H.startClientAttemptedEvent]=W.SendClientStartAttempt,Y[H.startClientSucceededEvent]=W.SendClientStartSuccessWeb,Y[H.beginInstallEvent]=W.SendInstallBegin,Y[H.successfulInstallEvent]=W.SendInstallSuccess,Y[H.manualDownloadEvent]=W.SendManualDownloadClick,Object.assign(z,{logToConsole:Q,logToEphemeralCounters:Z,logToGA:$}),n()(document).ready((function(){var e=[H.startClientAttemptedEvent,H.startClientFailedEvent,H.startClientSucceededEvent,H.beginInstallEvent,H.successfulInstallEvent,H.manualDownloadEvent];n()(H).on(e.join(" "),ee)}));var te=z;function ne(e,t){var n,a=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)),a}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){var a,o;a=e,t=n[o=t],o in a?Object.defineProperty(a,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[o]=t})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oe={isInstalling:!1,statusInterval:0,robloxLocale:"",gameLocale:"",protocolUrlSeparator:"+",protocolUrlIncludesLaunchTime:!1,protocolDetectionEnabled:!1,avatarParamEnabled:!0,separateScriptParamsEnabled:!1,waitTimeBeforeFailure:300,protocolNameForStudio:"roblox-studio",protocolNameForClient:"roblox-client",logger:null,channel:"",studioChannel:"",playerChannel:"",isDuarAutoOptInEnabled:!1,isDuarOptOutDisabled:!1,isJoinAttemptIdEnabled:!1},re={Global:"Global"},ie={edit:"edit",plugin:"plugin",play:"play",build:"build",app:"app",asset:"asset"};function le(e){return e===ie.edit||e===ie.plugin||e===ie.asset}function ce(e,t){function o(){clearTimeout(s),e()}var r,i,l,c,s=setTimeout((function(){n().modal.close(),function(e,t){var o="True"===a.PlaceLauncher.Resources.RefactorEnabled,r=le(t.launchMode);if(o)return r=r?a.PlaceLauncher.Resources.ProtocolHandlerAreYouInstalled.studio:a.PlaceLauncher.Resources.ProtocolHandlerAreYouInstalled.play,a.Dialog.open({bodyContent:r.content,allowHtmlContentInBody:!0,showAccept:!0,acceptColor:a.Dialog.green,acceptText:r.buttonText,showDecline:!1,dismissable:!1,xToCancel:!0,footerText:r.footerContent,allowHtmlContentInFooter:!0,onAccept:function(){Ie(t)},cssClass:"protocolhandler-are-you-installed-modal"});n()("#ProtocolHandlerAreYouInstalled").modal({escClose:!0,opacity:80,overlayCss:{backgroundColor:"#000"},onClose:function(){e(),n()("#ProtocolHandlerInstallButton").off("click"),n().modal.close()},zIndex:1031}),n()("#ProtocolHandlerInstallButton, #ProtocolHandlerStudioInstallButton").click((function(){Ie(t)}))}(o,t)}),5e3);r=o,i=t.launchMode,l="True"===a.PlaceLauncher.Resources.RefactorEnabled,c=le(i),l?(i=(c?a.PlaceLauncher.Resources.ProtocolHandlerStartingDialog.studio:a.PlaceLauncher.Resources.ProtocolHandlerStartingDialog.play).content,l=a.PlaceLauncher.Resources.ProtocolHandlerStartingDialog.loader,a.Dialog.open({bodyContent:i+l,allowHtmlContentInBody:!0,showAccept:!1,showDecline:!1,dismissable:!1,cssClass:"protocolhandler-starting-modal",onCloseCallback:r,onCancel:function(){r(),n().modal.close()}})):(c?n()(".protocol-handler-container").each((function(){n()(this).find(".play-modal").addClass("hidden"),n()(this).find(".studio-modal").removeClass("hidden")})):n()(".protocol-handler-container").each((function(){n()(this).find(".play-modal").removeClass("hidden"),n()(this).find(".studio-modal").addClass("hidden")})),n()("#ProtocolHandlerStartingDialog").modal({escClose:!0,opacity:80,overlayCss:{backgroundColor:"#000"},onClose:function(){r(),n().modal.close()},zIndex:1031}))}function se(){n().modal.close(),a.Dialog.open({titleText:a.Lang.VisitGameResources["Heading.ErrorStartingGame"],bodyContent:a.Lang.VisitGameResources["Response.Dialog.ErrorLaunching"],acceptText:a.Lang.ControlsResources["Action.OK"]||"OK",showDecline:!1})}function de(e){var t=new(n().Deferred);return clearInterval(oe.statusInterval),oe.statusInterval=setInterval((function(){var o=a.Endpoints.getAbsoluteUrl("/client-status");n().ajax(o,{success:function(n){"Unknown"!==n&&(t.resolve(e),clearInterval(oe.statusInterval))},cache:!1})}),3e3),t}function ue(e){n().modal.close(),e={launchMethod:"Protocol",params:e},n()(H).trigger(H.startClientSucceededEvent,e),oe.isInstalling&&(n()(H).trigger(H.successfulInstallEvent,e),oe.isInstalling=!1)}function pe(e){return!1}function me(e){var t;oe.protocolDetectionEnabled&&void 0!==navigator.msLaunchUri?navigator.msLaunchUri(e,(function(){}),(function(){})):(0<(t=n()("iframe#gamelaunch")).length&&t.remove(),t=n()("<iframe id='gamelaunch' class='hidden'></iframe>").attr("src",e),n()("body").append(t),t=new Event("ProtocolLaunchStartSelenium"),window.dispatchEvent(t))}function ve(e){var t,o=new(n().Deferred),r=le(e.launchMode),i=oe.protocolUrlSeparator,l="".concat(e.protocolName,":"),c=[];return c.push(1),c.push("launchmode:".concat(e.launchMode)),!e.gameInfo||e.protocolName===oe.protocolNameForStudio&&0===e.gameInfo.indexOf("Guest:")||c.push("gameinfo:".concat(encodeURIComponent(e.gameInfo))),oe.protocolUrlIncludesLaunchTime&&c.push("launchtime:".concat(e.launchTime)),"True"===a.PlaceLauncher.Resources.IsProtocolHandlerBaseUrlParamEnabled&&(t=a.EnvironmentUrls.websiteUrl||"https://".concat(window.location.host),c.push("baseUrl:".concat(encodeURIComponent(t)))),r&&a.CurrentUser.isAuthenticated&&(c.push("distributorType:".concat(re.Global)),c.push("userId:".concat(a.CurrentUser.userId))),r&&c.push("browser:".concat((0,g.getCurrentBrowser)())),n().each(e.otherParams,(function(e,t){e===t?c.push(e):c.push("".concat(e,":").concat(encodeURIComponent(t)))})),l+=c.join(i),H.gameLaunchLogger&&H.gameLaunchLogger.logToConsole("launchProtocolUrl: ".concat(JSON.stringify({url:l,params:e}))),me(l),o.resolve(e),o}function ge(e){return n().when((t=e,o=new(n().Deferred),e=le(t.launchMode),r=ae({},t),!a.CurrentUser.isAuthenticated||e?(o.resolve(r),o):oe.doAuthTicketRequest().then((function(e,t,n){return(n=n.getResponseHeader("RBX-Authentication-Ticket"))&&0<n.length?(r.gameInfo=n,o.resolve(r)):o.reject(),o}))),(e=a.Endpoints.getAbsoluteUrl("/client-status/set?status=Unknown"),n().ajax({method:"POST",url:e}))).then(ve,se).then(de).then(ue,pe);var t,o,r}function he(e){return n()(this).hasClass("disabled")||(ge(e.data),void 0===(e=n()("#ProtocolHandlerClickAlwaysAllowed")).data("hideRememberOverlay")&&e.show()),!1}function fe(e){return(e=ae({},e)).launchTime=(new Date).getTime(),e.otherParams.browsertrackerid=a.Cookies.getBrowserTrackerId(),e.otherParams.robloxLocale=oe.robloxLocale,e.otherParams.gameLocale=oe.gameLocale,e.otherParams.channel=oe.channel,e.protocolName===oe.protocolNameForStudio?e.otherParams.channel=oe.studioChannel:e.otherParams.channel=oe.playerChannel,oe.isDuarAutoOptInEnabled&&e.protocolName===oe.protocolNameForClient&&!e.otherParams.LaunchExp&&(oe.isDuarOptOutDisabled?e.otherParams.LaunchExp="InApp":e.otherParams.LaunchExp="PreferInApp"),n()(H).trigger(H.startClientAttemptedEvent,{launchMethod:"Protocol",params:e}),ce((function(){}),e),ge(e)}function be(e,t){var o=" ";return a.Endpoints&&a.Endpoints.Urls&&(o="".concat(a.Endpoints.getAbsoluteUrl("/Game/PlaceLauncher.ashx"),"?")),"h"!==o[0]&&(o="http://".concat(window.location.host)+"/Game/PlaceLauncher.ashx?"),o=o.replace("placelauncher","PlaceLauncher"),e={request:e,browserTrackerId:a.Cookies.getBrowserTrackerId()},n().extend(e,t),o+n().param(e)}function ye(e,t,o){return r="Edit.ashx",i=e,e=t,t=o,o=" ",a.Endpoints&&a.Endpoints.Urls&&(o="".concat(a.Endpoints.getAbsoluteUrl("/Game/".concat(r)),"?")),"h"!==o[0]&&(o="http://".concat(window.location.host)+"/Game/".concat(r,"?")),e={placeId:i,upload:t?i:"",universeId:e,testMode:!1},o+n().param(e);var r,i}function we(){document.getElementById("downloadInstallerIFrame").src="/download/client"}function Ie(e){var t=le(e.launchMode);n().modal.close(),t||(a.Dialog.open({titleText:n()("#InstallationInstructions .ph-modal-header .title").text(),allowHtmlContentInBody:!0,bodyContent:n()("#InstallationInstructions .modal-content-container").html(),allowHtmlContentInFooter:!0,footerText:n()("#InstallationInstructions .xsmall").html(),acceptColor:a.Dialog.none,declineColor:a.Dialog.none,cssClass:"install-instructions-modal",xToCancel:!0,onCloseCallback:function(){n()("#ProtocolHandlerClickAlwaysAllowed").hide()}}),0===n()("#GameLaunchInstructionsLinkScript").length&&oe.attachManualDownloadToLink(),setTimeout((function(){n()(".VisitButtonContinueGLI a").removeClass("disabled").click(e,he)}),5e3)),function(e,t){var a=ae({},e);e=a.gameInfo,void 0!==a.gameInfo&&(a.gameInfo=void 0),n()(H).trigger(H.beginInstallEvent,{launchMethod:"Protocol",params:a}),oe.isInstalling=!0,a.url=window.location.href,void 0!==e&&(a.gameInfo=e),t?document.getElementById("downloadInstallerIFrame").src="/download/studio":we()}(e,t)}function Pe(){n()(H).trigger(H.manualDownloadEvent,{launchMethod:"Protocol",params:{}}),we()}Object.assign(oe,{joinMultiplayerGame:function(e){var t=oe.protocolNameForClient,n=be("RequestGame",e),a=!0===e.isPlayTogetherGame;return fe({protocolName:t,launchMode:"play",otherParams:{placelauncherurl:n},placeId:e.placeId,isPlayTogetherGame:a})},openStudio:function(){var e={};return oe.avatarParamEnabled&&(e.avatar="avatar"),fe({protocolName:oe.protocolNameForStudio,launchMode:"edit",otherParams:e})},tryAssetInStudio:function(e){return e={assetid:e},oe.avatarParamEnabled&&(e.avatar="avatar"),fe({protocolName:oe.protocolNameForStudio,launchMode:"asset",otherParams:e})},openPluginInStudio:function(e){e={pluginid:e},oe.avatarParamEnabled&&(e.avatar="avatar"),fe({protocolName:oe.protocolNameForStudio,launchMode:"plugin",otherParams:e})},editGameInStudio:function(e,t,n){n=oe.separateScriptParamsEnabled?{task:"EditPlace",placeId:e,universeId:t}:{script:ye(e,t,n)},oe.avatarParamEnabled&&(n.avatar="avatar"),fe({protocolName:oe.protocolNameForStudio,launchMode:"edit",otherParams:n,placeId:e})},followPlayerIntoGame:function(e){return fe({protocolName:oe.protocolNameForClient,launchMode:"play",otherParams:{placelauncherurl:be("RequestFollowUser",e)}})},joinGameInstance:function(e){var t=oe.protocolNameForClient,n=be("RequestGameJob",e),a=!0===e.isPlayTogetherGame;return fe({protocolName:t,launchMode:"play",otherParams:{placelauncherurl:n},placeId:e.placeId,isPlayTogetherGame:a})},joinPrivateGame:function(e){return fe({protocolName:oe.protocolNameForClient,launchMode:"play",otherParams:{placelauncherurl:be("RequestPrivateGame",e)},placeId:e.placeId})},playTogetherGame:function(e){return fe({protocolName:oe.protocolNameForClient,launchMode:"play",otherParams:{placelauncherurl:be("RequestPlayTogetherGame",e)},placeId:e.placeId,conversationId:e.conversationId})},manualDownload:Pe,attachManualDownloadToLink:function(){n()("body #GameLaunchManualInstallLink").click((function(){return Pe(),!1}))},startDownload:we,setLocationHref:me,doAuthTicketRequest:function(){var e="".concat(a.EnvironmentUrls.authApi,"/v1/authentication-ticket/");return n().ajax({method:"POST",url:e,contentType:"application/json"})},openDesktopUniversalApp:function(){var e={},t=oe.protocolNameForClient;return e.protocolName=t,e.launchTime=(new Date).getTime(),e.launchMode=ie.app,e.otherParams={},e.otherParams.browsertrackerid=a.Cookies.getBrowserTrackerId(),e.otherParams.robloxLocale=oe.robloxLocale,e.otherParams.gameLocale=oe.gameLocale,e.otherParams.LaunchExp="InApp",n()(H).trigger(H.startClientAttemptedEvent,{launchMethod:"Protocol",params:e}),ce((function(){}),e),ge(e)},showDialog:ce,showLaunchFailureDialog:se,cleanUpAndLogSuccess:ue,cleanUpAndLogFailure:pe,startGameWithDeepLinkUrl:function(e,t){ce((function(){}),{launchMode:"play",protocolName:oe.protocolNameForClient,placeId:t}),me(e),setTimeout((function(){n().modal.close()}),6e4)}}),n()(document).ready((function(){H.setGameLaunchInterface(oe);var e=n()("#PlaceLauncherStatusPanel");oe.protocolNameForClient=e.data("protocol-name-for-client"),oe.protocolNameForStudio=e.data("protocol-name-for-studio"),oe.protocolUrlIncludesLaunchTime=e.data("protocol-url-includes-launchtime"),oe.protocolDetectionEnabled=e.data("protocol-detection-enabled"),oe.separateScriptParamsEnabled=e.data("protocol-separate-script-parameters-enabled"),oe.avatarParamEnabled=e.data("protocol-avatar-parameter-enabled"),oe.isJoinAttemptIdEnabled="True"===(null!==(t=e.data("is-join-attempt-id-enabled"))&&void 0!==t?t:"False"),oe.robloxLocale=e.data("protocol-roblox-locale"),oe.gameLocale=e.data("protocol-game-locale");var t=e.data("protocol-channel-name");"string"==typeof t&&"LIVE"!==t.toUpperCase()&&(oe.channel=t),"string"==typeof(t=e.data("protocol-studio-channel-name"))&&"LIVE"!==t.toUpperCase()&&(oe.studioChannel=t),"string"==typeof(t=e.data("protocol-player-channel-name"))&&"LIVE"!==t.toUpperCase()&&(oe.playerChannel=t),oe.logger||void 0===window.Roblox.ProtocolHandlerLogger||(oe.logger=window.Roblox.ProtocolHandlerLogger),oe.isDuarAutoOptInEnabled=e.data("is-duar-auto-opt-in-enabled"),oe.isDuarOptOutDisabled=e.data("is-duar-opt-out-disabled")}));var Ce=oe,Ee=React,Ae=e.n(Ee),Se=CoreRobloxUtilities,Le=function(e,t,n,a){return new(n=n||Promise)((function(o,r){function i(e){try{c(a.next(e))}catch(e){r(e)}}function l(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((a=a.apply(e,t||[])).next())}))},Te=function(e,t){var n,a,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i={next:l(0),throw:l(1),return:l(2)};return"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,a=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(o=0<(o=r.trys).length&&o[o.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){r.label=i[1];break}if(6===i[0]&&r.label<o[1]){r.label=o[1],o=i;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(i);break}o[2]&&r.ops.pop(),r.trys.pop();continue}i=t.call(e,r)}catch(e){i=[6,e],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},De=Se.dataStores.gamesDataStore,Ge=function(e){return Le(void 0,void 0,Promise,(function(){var t;return Te(this,(function(n){switch(n.label){case 0:return[4,De.getProductInfo(e)];case 1:return[2,(void 0===(t=n.sent().data.data)?[]:t)[0]]}}))}))},xe=function(e){return Le(void 0,void 0,Promise,(function(){var t;return Te(this,(function(n){switch(n.label){case 0:return[4,De.getPlaceDetails(e)];case 1:return[2,(void 0===(t=n.sent().data)?[]:t)[0]]}}))}))},Oe=function(e){return Le(void 0,void 0,Promise,(function(){var t;return Te(this,(function(n){switch(n.label){case 0:return[4,De.getPlayabilityStatus(e)];case 1:return[2,(void 0===(t=n.sent().data)?[]:t)[0]]}}))}))},Ue=function(e){return Le(void 0,void 0,Promise,(function(){var t;return Te(this,(function(n){switch(n.label){case 0:return t={withCredentials:!0,url:a.EnvironmentUrls.voiceApi+"/v1/settings/verify/show-age-verification-overlay/"+e},[4,g.httpService.get(t)];case 1:return[2,n.sent().data]}}))}))},Re=function(){return Le(void 0,void 0,Promise,(function(){var e;return Te(this,(function(t){switch(t.label){case 0:return e={withCredentials:!0,url:a.EnvironmentUrls.apiGatewayUrl+"/universal-app-configuration/v1/behaviors/play-button-ui/content"},[4,g.httpService.get(e)];case 1:return[2,t.sent().data]}}))}))},je=function(){return(je=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ke={UnplayableOtherReason:"UnplayableOtherReason",Playable:"Playable",GuestProhibited:"GuestProhibited",GameUnapproved:"GameUnapproved",IncorrectConfiguration:"IncorrectConfiguration",UniverseRootPlaceIsPrivate:"UniverseRootPlaceIsPrivate",InsufficientPermissionFriendsOnly:"InsufficientPermissionFriendsOnly",InsufficientPermissionGroupOnly:"InsufficientPermissionGroupOnly",DeviceRestricted:"DeviceRestricted",UnderReview:"UnderReview",PurchaseRequired:"PurchaseRequired",AccountRestricted:"AccountRestricted",TemporarilyUnavailable:"TemporarilyUnavailable",ComplianceBlocked:"ComplianceBlocked",ContextualPlayabilityRegionalAvailability:"ContextualPlayabilityRegionalAvailability",ContextualPlayabilityRegionalCompliance:"ContextualPlayabilityRegionalCompliance",ContextualPlayabilityAgeRecommendationParentalControls:"ContextualPlayabilityAgeRecommendationParentalControls",ContextualPlayabilityAgeGated:"ContextualPlayabilityAgeGated",PlaceHasNoPublishedVersion:"PlaceHasNoPublishedVersion",ContextualPlayabilityUnverifiedSeventeenPlusUser:"ContextualPlayabilityUnverifiedSeventeenPlusUser"},Be={playButtonTranslationMap:((Ye={})[ke.UnplayableOtherReason]="Response.GameTemporarilyUnavailable",Ye[ke.TemporarilyUnavailable]="Response.GameTemporarilyUnavailable",Ye[ke.GameUnapproved]="Label.GameUnavailablePlaceUnderReview",Ye[ke.IncorrectConfiguration]="Response.GameTemporarilyUnavailable",Ye[ke.UniverseRootPlaceIsPrivate]="Label.GameUnavailableCurrentlyIsPrivateVisitor",Ye[ke.InsufficientPermissionFriendsOnly]="Label.GameUnavailablePermissionLevels",Ye[ke.InsufficientPermissionGroupOnly]="Label.GameUnavailablePermissionLevels",Ye[ke.DeviceRestricted]="Response.GameTemporarilyUnavailable",Ye[ke.UnderReview]="Label.GameUnavailablePlaceUnderReview",Ye[ke.AccountRestricted]="Label.GameUnavailableAccountResrictions",Ye[ke.ComplianceBlocked]="Label.ComplianceBlocked",Ye[ke.ContextualPlayabilityRegionalAvailability]="Label.ContextualPlayabilityRegionalAvailability",Ye[ke.ContextualPlayabilityRegionalCompliance]="Label.ContextualPlayabilityRegionalCompliance",Ye[ke.ContextualPlayabilityAgeRecommendationParentalControls]="Label.ContextualPlayabilityAgeRecommendationParentalControls",Ye[ke.ContextualPlayabilityAgeGated]="Label.ContextualPlayabilityAgeGated",Ye[ke.PlaceHasNoPublishedVersion]="Label.GameUnavailableRootPlaceIsUnpublished",Ye),eventStreamProperties:function(e,t){return{eventName:"playGameClicked",ctx:"click",properties:je(je({},t),{placeId:e}),gamePlayIntentEventCtx:"PlayButton"}},PlayabilityStatus:ke,avatarChatUpsellLayer:"Voice.AvatarChat.Upsell",avatarChatUpsellLayerU13:"Voice.AvatarChat.U13Upsell"},Me=function(e){function t(){return function(e,t,n,a){return new(n=n||Promise)((function(o,r){function i(e){try{c(a.next(e))}catch(e){r(e)}}function l(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((a=a.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){var t;return function(e,t){var n,a,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i={next:l(0),throw:l(1),return:l(2)};return"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,a=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(o=0<(o=r.trys).length&&o[o.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){r.label=i[1];break}if(6===i[0]&&r.label<o[1]){r.label=o[1],o=i;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(i);break}o[2]&&r.ops.pop(),r.trys.pop();continue}i=t.call(e,r)}catch(e){i=[6,e],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(n){switch(n.label){case 0:o(void 0),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,Oe([e])];case 2:return t=n.sent(),o(t.playabilityStatus),[3,4];case 3:return n.sent(),o(ke.TemporarilyUnavailable),[3,4];case 4:return[2]}}))}))}var n=(0,Ee.useState)(void 0),a=n[0],o=n[1];return(0,Ee.useEffect)((function(){function e(e){e.persisted&&t()}return t(),window.addEventListener("pageshow",e),function(){window.removeEventListener("pageshow",e)}}),[]),[a,t]},Ve=HeaderScripts,Ne=function(e,t,n,a){return new(n=n||Promise)((function(o,r){function i(e){try{c(a.next(e))}catch(e){r(e)}}function l(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((a=a.apply(e,t||[])).next())}))},Fe=function(e,t){var n,a,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i={next:l(0),throw:l(1),return:l(2)};return"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,a=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(o=0<(o=r.trys).length&&o[o.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){r.label=i[1];break}if(6===i[0]&&r.label<o[1]){r.label=o[1],o=i;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(i);break}o[2]&&r.ops.pop(),r.trys.pop();continue}i=t.call(e,r)}catch(e){i=[6,e],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}};function _e(e,t){void 0===t&&(t={});var n=a.EnvironmentUrls.websiteUrl+"/games/start?placeid="+e;return a.GameLauncher.isJoinAttemptIdEnabled()&&(e=t.joinAttemptOrigin,0<(null==(t="string"==typeof(t=t.joinAttemptId)?t:g.uuidService.generateRandomUuid())?void 0:t.length)&&(n+="&joinAttemptId="+t,"string"==typeof e&&0<e.length&&(n+="&joinAttemptOrigin="+e))),encodeURIComponent(n)}function He(e,t,n,a,o){void 0===o&&(o={});var r=Ve.deviceMeta.getDeviceMeta();null!=r&&r.isIosDevice||null!=r&&r.isAndroidDevice||Ve.jsClientDeviceIdentifier.isIos13Ipad?(r=_e(e,o),window.open("https://ro.blox.com/Ebh5?pid=share&is_retargeting=true&af_dp="+r+"&af_web_dp="+r,"_self")):Se.playGameService.launchGame(Se.playGameService.buildPlayGameProperties(t,e,a,void 0,n),Be.eventStreamProperties(e,o))}function qe(e){var t=Ve.deviceMeta.getDeviceMeta();null!=t&&t.isIosDevice||null!=t&&t.isAndroidDevice||Ve.jsClientDeviceIdentifier.isIos13Ipad?(t=_e(e),window.open("https://ro.blox.com/Ebh5?pid=share&is_retargeting=true&af_dp="+t+"&af_web_dp="+t,"_self")):Se.playGameService.launchGame(Se.playGameService.buildPlayGameProperties(void 0,e.toString()),Be.eventStreamProperties(e,{}))}function Je(e,t){return Ne(void 0,void 0,Promise,(function(){return Fe(this,(function(n){try{return[2,a.IdentityVerificationService.showVoiceOptInOverlay(e,t)]}catch(n){return[2,!1]}return[2]}))}))}function We(e){var t=e.universeId,n=e.placeId,o=e.rootPlaceId,r=e.privateServerLinkCode,i=e.gameInstanceId,l=e.status,c=e.eventProperties,s=void 0===c?{}:c,d=void 0===(u=e.iconClassName)?"icon-common-play":u,u=void 0===(c=e.buttonWidth)?ze.Button.widths.full:c,p=(e=void 0===(c=e.buttonClassName)?"btn-common-play-game-lg":c,(c=(0,Ee.useState)(void 0))[0]),m=c[1],v=(c=(0,Ee.useState)(void 0))[0],g=c[1],h=(c=(0,Ee.useState)(void 0))[0],f=c[1],b=(c=(0,Ee.useState)(void 0))[0],y=c[1],w=(c=(0,Ee.useState)(void 0))[0],I=c[1],P=(c=(0,Ee.useState)(void 0))[0],C=c[1];return(0,Ee.useEffect)((function(){Ze(void 0,void 0,void 0,(function(){var e;return $e(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(o=t,Ze(void 0,void 0,Promise,(function(){var e,t,n,r,i,l,c,s,d,u,p,m,v,g;return $e(this,(function(h){switch(h.label){case 0:return Ve.authenticatedUser.isAuthenticated?[4,Re()]:[2,{showAgeVerificationOverlay:!1,showVoiceOptInOverlay:!1,showAvatarVideoOptInOverlay:!1,requireExplicitVoiceConsent:!0,useExitBetaLanguage:!1,useCameraU13Design:!1}];case 1:return c=h.sent(),e=c.playButtonOverlayWebFlag,t=c.voiceOptInWebFlag,n=c.cameraOptInWebFlag,r=c.cameraOptInWebFlagU13,i=c.requireExplicitVoiceConsent,l=c.useExitBetaLanguage,c=c.useCameraU13Design,e||t||n?[4,Ue(o)]:[2,{showAgeVerificationOverlay:!1,showVoiceOptInOverlay:!1,showAvatarVideoOptInOverlay:!1,requireExplicitVoiceConsent:i,useExitBetaLanguage:l,useCameraU13Design:c}];case 2:return m=h.sent(),s=m.showAgeVerificationOverlay,d=m.showVoiceOptInOverlay,u=m.showAvatarVideoOptInOverlay,m=p=!1,a.ExperimentationService.getAllValuesForLayer?(v=Boolean,[4,a.ExperimentationService.getAllValuesForLayer(at)]):[3,5];case 3:return p=v.apply(void 0,[h.sent().ShouldShowUpsell]),g=Boolean,[4,a.ExperimentationService.getAllValuesForLayer(ot)];case 4:m=g.apply(void 0,[h.sent().ShouldShowUpsell]),h.label=5;case 5:return[2,{showAgeVerificationOverlay:e&&s,showVoiceOptInOverlay:t&&d,showAvatarVideoOptInOverlay:u&&(n&&p||r&&m),requireExplicitVoiceConsent:i,useExitBetaLanguage:l,useCameraU13Design:c}]}}))})))];case 1:return e=n.sent(),m(e.showAgeVerificationOverlay),g(e.showVoiceOptInOverlay),f(e.showAvatarVideoOptInOverlay),y(e.requireExplicitVoiceConsent),I(e.useExitBetaLanguage),C(e.useCameraU13Design),[3,3];case 2:return e=n.sent(),console.error(e),m(!1),g(!1),I(!1),[3,3];case 3:return[2]}var o}))}))}),[]),void 0===p?Ae().createElement(ze.Loading,null):Ae().createElement(Ae().Fragment,null,Ae().createElement(ze.Button,{"data-testid":"play-button",width:u,className:e,onClick:function(e){return Ze(void 0,void 0,void 0,(function(){var t;return $e(this,(function(c){switch(c.label){case 0:return e.preventDefault(),e.stopPropagation(),l!==nt.Playable?[3,7]:p?[4,Ne(void 0,void 0,Promise,(function(){return Fe(this,(function(e){try{return[2,a.IdentityVerificationService.startVerificationFlow()]}catch(e){return[2,[!1,!1]]}return[2]}))}))]:[3,2];case 1:return(t=c.sent())[0],t[1]&&m(!1),[3,6];case 2:return v?[4,Je(null==b||b,null!=w&&w)]:[3,4];case 3:return c.sent()&&g(!1),[3,6];case 4:return h?[4,(d=null==b||b,u=null!=P&&P,Ne(void 0,void 0,Promise,(function(){return Fe(this,(function(e){try{return[2,a.IdentityVerificationService.showAvatarVideoOptInOverlay(d,u)]}catch(e){return[2,!1]}return[2]}))})))]:[3,6];case 5:c.sent()&&f(!1),c.label=6;case 6:return He(n,o,r,i,s),[3,10];case 7:return l!==nt.GuestProhibited?[3,8]:(qe(n),[3,10]);case 8:return l!==nt.ContextualPlayabilityUnverifiedSeventeenPlusUser?[3,10]:[4,Ne(void 0,void 0,Promise,(function(){return Fe(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,a.AccessManagementUpsellService.showAccessManagementVerificationModal()];case 1:return[2,e.sent()];case 2:return e.sent(),[2,!1];case 3:return[2]}}))}))];case 9:c.sent(),c.label=10;case 10:return[2]}var d,u}))}))}},Ae().createElement("span",{className:d})),Ae().createElement("div",{id:"id-verification-container"}),Ae().createElement("div",{id:"access-management-upsell-container"}))}var ze=ReactStyleGuide,Xe=RobloxItemPurchase,Ke=(t=ReactUtilities,RobloxThumbnails),Ye={common:["Common.VisitGame"],feature:""},Qe=function(){return(Qe=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Ze=function(e,t,n,a){return new(n=n||Promise)((function(o,r){function i(e){try{c(a.next(e))}catch(e){r(e)}}function l(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((a=a.apply(e,t||[])).next())}))},$e=function(e,t){var n,a,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i={next:l(0),throw:l(1),return:l(2)};return"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,a=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(o=0<(o=r.trys).length&&o[o.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){r.label=i[1];break}if(6===i[0]&&r.label<o[1]){r.label=o[1],o=i;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(i);break}o[2]&&r.ops.pop(),r.trys.pop();continue}i=t.call(e,r)}catch(e){i=[6,e],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},et=(Xe=(0,Xe.createItemPurchase)())[0],tt=Xe[1],nt=Be.PlayabilityStatus,at=Be.avatarChatUpsellLayer,ot=Be.avatarChatUpsellLayerU13,rt=(0,t.withTranslations)((function(e){var t=e.translate,n=e.universeId,a=e.placeId,o=void 0===(l=e.iconClassName)?"icon-robux-white":l,r=void 0===(d=e.buttonWidth)?ze.Button.widths.full:d,i=void 0===(c=e.buttonClassName)?"btn-common-play-game-lg":c,l=e.refetchPlayabilityStatus,c=(d=(0,Ee.useState)(void 0))[0],s=d[1],d=(e=(0,Ee.useState)(void 0))[0],u=e[1];return(0,Ee.useEffect)((function(){Ze(void 0,void 0,void 0,(function(){var e;return $e(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Ge([n])];case 1:return e=t.sent(),s(e),[3,3];case 2:return e=t.sent(),console.log(e),[3,3];case 3:return[2]}}))})),Ze(void 0,void 0,void 0,(function(){var e;return $e(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,xe([a])];case 1:return e=t.sent(),u(e),[3,3];case 2:return e=t.sent(),console.log(e),[3,3];case 3:return[2]}}))}))}),[]),void 0===c||void 0===d?Ae().createElement(ze.Loading,null):Ae().createElement(Ae().Fragment,null,Ae().createElement(ze.Button,{"data-testid":"play-purchase-button",width:r,className:i,onClick:function(e){e.preventDefault(),e.stopPropagation(),tt.start()}},Ae().createElement("span",{className:o}),Ae().createElement("span",{className:"btn-text"},c.price)," "),Ae().createElement(et,Qe({},{translate:t,productId:c.productId,expectedPrice:c.price,thumbnail:Ae().createElement(Ke.Thumbnail2d,{type:Ke.ThumbnailTypes.gameIcon,size:Ke.DefaultThumbnailSize,targetId:parseInt(n,10),imgClassName:"game-card-thumb",format:Ke.ThumbnailFormat.jpeg}),assetName:d.name,assetType:"Place",sellerName:d.builder,expectedCurrency:1,expectedSellerId:c.sellerId,onPurchaseSuccess:l,isPlace:!0})))}),Ye),it=(0,t.withTranslations)((function(e){var t=e.translate;e=e.playabilityStatus;return Ae().createElement("span",{"data-testid":"play-error",className:"error-message"},t(Be.playButtonTranslationMap[e]))}),Ye);Me={usePlayabilityStatus:Me,PlayabilityStatuses:ke,launchGame:He,launchLogin:qe,DefaultPlayButton:function(e){var t=e.placeId,n=e.rootPlaceId,a=e.universeId,o=e.privateServerLinkCode,r=e.gameInstanceId,i=e.refetchPlayabilityStatus,l=e.playabilityStatus,c=void 0===(e=e.eventProperties)?{}:e;switch(l){case void 0:return Ae().createElement(ze.Loading,null);case nt.Playable:case nt.GuestProhibited:case nt.ContextualPlayabilityUnverifiedSeventeenPlusUser:return Ae().createElement(We,{universeId:a,placeId:t,rootPlaceId:n,privateServerLinkCode:o,gameInstanceId:r,status:l,eventProperties:c});case nt.PurchaseRequired:return Ae().createElement(rt,{refetchPlayabilityStatus:i,universeId:a,placeId:t});default:return Ae().createElement(it,{playabilityStatus:l})}},PlayButton:We,PurchaseButton:rt,Error:it};window.Roblox||(window.Roblox={}),Object.assign(window.Roblox,{AuthenticationChecker:v,GameLauncher:H,GameLaunchLogger:te,GamePlayEvents:W,PrerollPlayer:U,ProtocolHandlerClientInterface:Ce,VideoPreRollDFP:O,PlayButton:Me}),n()(document).ready((function(){!function(){var e="click";n()("body").on(e,".VisitButtonPlay, .VisitButtonPlayGLI",(function(){var e,t,o,r,i,l=n()(this);(l.hasClass("VisitButtonPlay")||l.hasClass("VisitButtonPlayGLI"))&&(e="PlayButton"),e&&(t=n()(this).attr("placeid"),o=n()(this).data("universe-id"),i=n()(this).data("user-id"),r=n()(this).data("originator-type"),l=n()(this).data("originator-id"),"GameUpdateNotification"===r&&n().ajax({url:"".concat(a.EnvironmentUrls.notificationApi,"/v2/stream-notifications/game-update-notification-interacted"),type:"POST",data:{universeId:o,createdOn:new Date(l),interactionType:"Played",currentUserId:i}}),i=a.UrlParser?a.UrlParser.getParameterValueByName("rbxp"):null,W.SendGamePlayIntent(e,t,i))})),n()("body").on(e,".VisitButtonEdit, .VisitButtonEditGLI",(function(){var e=n()(this).attr("placeid");W.SendDevelopIntent("Edit",e)})),n()("#rbx-running-games").on(e,".rbx-game-server-item .rbx-game-server-join",(function(){var e=n()(this).data("placeid");e&&W.SendGamePlayIntent("JoinInstance",e)})),n()("#rbx-friends-running-games").on(e,".rbx-friends-game-server-item .rbx-friends-game-server-join",(function(){var e=n()(this).data("placeid");e&&W.SendGamePlayIntent("JoinInstance",e)})),n()("#game-instances").on(e,"#rbx-vip-servers .rbx-vip-server-item .rbx-vip-server-join",(function(){var e=n()(this).data("placeid");e&&W.SendGamePlayIntent("PrivateServer",e)})),n()("#build-page").on(e,".roblox-edit-button",(function(){var e;(e=(e=n()(this).parents("table.item-table")).data("rootplace-id")||e.data("item-id"))&&W.SendDevelopIntent("Edit",e)}))}();var e=(0,a.DeviceMeta)();(e.isUWPApp||e.isUniversalApp)&&(e=n()("#PlaceLauncherStatusPanel"),l.isJoinAttemptIdEnabled="True"===(null!==(e=e.data("is-join-attempt-id-enabled"))&&void 0!==e?e:"False"),window.Roblox.AppHybridClientInterface=l,H.setGameLaunchInterface(l)),H.setGameLaunchLogger(te)}))}(),window.Roblox&&window.Roblox.BundleDetector&&window.Roblox.BundleDetector.bundleDetected("GameLaunch");