!function(){"use strict";function e(){return{retryable:!0,withCredentials:!0,url:"".concat(Q,"/v1/email")}}var t={n:function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,{a:n}),n},d:function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},n=CoreUtilities,r=React,i=t.n(r),o=ReactDOM,a=Roblox,c=t.n(a),l=PropTypes,s=t.n(l),u=ReactUtilities,d="verificationUpsell-container",p={common:[],feature:"Feature.VerificationUpsell"},m="SET_USER_EMAIL_STATES",f="SET_MODAL_STATES",v="SET_PAGENAME_STATE",y="SET_INPUT_STATE",h="SET_ERROR_STATE",b="SET_EMAIL_SENT_STATE",g="SET_RESEND_EMAIL_STATE",E="SET_EMAIL_UPDATING_STATE",P="SET_TRIGGER_ORIGIN",S="SET_INPUT_CLEAR",x="SET_EMAIL_ADDED_STATE",C="Verification",N="UpdateEmail",w="logout",A="homepage",O="notApprovedPage",T="Action.ChangeEmail",M="Action.ResendConfirmationEmail",k="Action.SendConfirmationEmail",R="Action.Logout",I="Action.GenericSkip",D="Action.Continue",U="Description.PleaseEnterEmail",j="Description.PleaseEnterParentEmail",_="Description.AddEmailTextOver13",L="Description.AddEmailTextUnder13",B="Description.LogoutAddEmailTextOver13",H="Description.LogoutAddEmailTextUnder13",V="Description.VerifyEmailBody",q="Heading.PleaseAddEmail",F="Heading.AddEmail",G="Heading.VerifyEmail",W="Heading.VerifyOnLogout",Y="Label.EmailInputPlaceholderOver13",$="Label.EmailInputPlaceholderUnder13",z="Message.ConfirmationEmailNotSent",K="Message.InvalidEmailAddress",X="Response.ErrorTryAgain",J="Response.TooManyAttemptsTryAgainLater",Q=a.EnvironmentUrls.accountSettingsApi,Z=a.EnvironmentUrls.authApi,ee=a.EnvironmentUrls.apiGatewayUrl,te=a.EnvironmentUrls.accountInformationApi,ne={header:"alt_title",body:"alt_body",primaryButton:"alt_primary_button_text",secondaryButton:"alt_secondary_button_text"};function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ie(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){var r,i;r=e,t=n[i=t],i in r?Object.defineProperty(r,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[i]=t})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ae(e,t){switch(t.type){case S:return oe(oe({},e),{},{userEmailInput:""});case P:return oe(oe({},e),{},{origin:t.origin,skipCallback:t.skipCallback,closeCallback:t.closeCallback});case m:return oe(oe({},e),{},{isEmailVerified:t.isEmailVerified,userEmail:t.userEmail});case v:return oe(oe({},e),{},{pageName:t.pageName});case h:return oe(oe({},e),{},{errorMsg:t.errorMsg});case E:return oe(oe({},e),{},{isEmailUpdating:t.isEmailUpdating});case b:return oe(oe({},e),{},{isEmailSent:!0});case x:return oe(oe({},e),{},{isEmailAdded:!0});case g:return oe(oe({},e),{},{isEmailSent:!1});case y:return e.pageName===N?oe(oe({},e),{},{userEmailInput:t.value,errorMsg:""}):e;case f:if(e.pageName!==N)return oe(oe({},e),{},{pageName:C,titleText:ge,bodyText:fe,primaryButtonText:se,secondaryButtonText:ue,errorMsg:""});var n,r,i,o=a.CurrentUser&&!a.CurrentUser.isUnder13,c=le,l="";switch(e.skipCallback&&(l=pe),e.origin){case w:r=Se,i=o?he:be,l=de,t.experimentParameters&&(r=null!==(n=t.experimentParameters[ne.header])&&void 0!==n?n:r,i=null!==(n=t.experimentParameters[ne.body])&&void 0!==n?n:i,c=null!==(n=t.experimentParameters[ne.primaryButton])&&void 0!==n?n:c,l=null!==(n=t.experimentParameters[ne.secondaryButton])&&void 0!==n?n:l);break;case A:case O:r=Pe,i=o?Ne:we,c=me;break;default:r=Ee,i=o?ve:ye}return oe(oe({},e),{},{pageName:N,titleText:r,bodyText:i,primaryButtonText:c,secondaryButtonText:l,errorMsg:"",userEmailInputPlaceholder:o?xe:Ce});default:return e}}function ce(e){var t=e.children,n=(e=(n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?re(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useReducer)(ae,Ae),2))[0],n[1]);return i().createElement(Oe.Provider,{value:{emailUpsellState:e,dispatch:n}},t)}var le=k,se=M,ue=T,de=R,pe=I,me=D,fe=V,ve=_,ye=L,he=B,be=H,ge=G,Ee=F,Pe=q,Se=W,xe=Y,Ce=$,Ne=U,we=j,Ae={pageName:"",isModalOpen:!1,isEmailVerified:!1,isEmailSent:!1,isEmailUpdating:!1,isEmailAdded:!1,origin:"",experimentParameters:null,userEmail:"",userEmailInput:"",userEmailInputPlaceholder:xe,errorMsg:"",titleText:ge,bodyText:fe,primaryButtonText:se,secondaryButtonText:ue,skipCallback:null,closeCallback:null},Oe=(0,r.createContext)(Ae);function Te(){return(0,r.useContext)(Oe)}ce.propTypes={children:s().node.isRequired};var Me=ReactStyleGuide,ke=HeaderScripts,Re=(!!a.DeviceMeta&&(0,a.DeviceMeta)()).isAndroidApp;function Ie(e){var t=e.show,n=e.onHide,r=e.onPrimaryAction,o=e.onSecondaryAction,a=e.onInputChange,c=e.onBackAction,l=e.onInputFocus,s=e.onKeyDown,u=e.translate,d=(P=Te().emailUpsellState).pageName,p=P.titleText,m=P.bodyText,f=P.primaryButtonText,v=P.secondaryButtonText,y=P.userEmailInput,h=P.userEmailInputPlaceholder,b=P.userEmail,g=P.errorMsg,E=P.isEmailSent,P=(e=P.isEmailUpdating,null===ke.authenticatedUser||void 0===ke.authenticatedUser?void 0:ke.authenticatedUser.isUnder13);return i().createElement(Me.Modal,{show:t,onHide:n,className:"".concat(Re?"verification-android-modal":""," verification-modal"),size:"lg","aria-labelledby":"contained-modal-title-vcenter",scrollable:"true",centered:"true"},i().createElement(Me.Modal.Header,{useBaseBootstrapComponent:!0},i().createElement("div",{className:"verification-upsell-title-container"},"UpdatePassword"===d?i().createElement("button",{type:"button",className:"verification-upsell-title-button",onClick:c},i().createElement("span",{className:"icon-back"})):i().createElement("button",{type:"button",className:"verification-upsell-title-button",onClick:n},i().createElement("span",{className:"close icon-close"})),i().createElement(Me.Modal.Title,{id:"contained-modal-title-vcenter"},u(p)))),i().createElement(Me.Modal.Body,null,i().createElement("div",{className:"email-verification-upsell-image"}),i().createElement("p",{className:"verification-upsell-text-body"},u(m,{emailAddress:b})),d===N&&i().createElement("input",{type:"email",autoFocus:!0,className:"".concat(g?"input-field-error":""," form-control input-field verification-upsell-modal-input"),placeholder:u(h),autoComplete:"email",value:y,onChange:function(e){return a(e.target.value)},onFocus:function(){return l()},onKeyDown:function(e){return s(e.key)}}),g&&i().createElement("p",{className:"text-error modal-error-message sms-code-error"},u(g)),d===N&&P&&i().createElement("div",{className:"privacy-policy-button"},i().createElement("a",{href:"https://en.help.roblox.com/hc/articles/115004630823-Roblox-Privacy-and-Cookie-Policy",target:"_blank",rel:"noreferrer"},u("Action.PrivacyPolicy")))),i().createElement(Me.Modal.Footer,null,i().createElement("div",{className:"verification-upsell-footer-container"},d!==C&&i().createElement(Me.Button,{className:"modal-button verification-upsell-btn",variant:Me.Button.variants.cta,size:Me.Button.sizes.medium,isDisabled:e,onClick:r},u(f)),d===C&&i().createElement("button",{type:"button",className:"".concat(E?"resend-button-disabled":""," resend-verification-email-button"),disabled:E||g,onClick:r},u(f)),v&&i().createElement("button",{type:"button",className:"change-email-button",onClick:o},u(v)))))}function De(e){var t=null==e||null===(t=e.data)||void 0===t?void 0:t.errors;return t&&t[0]&&t[0].code}Ie.propTypes={translate:s().func.isRequired,onHide:s().func.isRequired,show:s().bool.isRequired,onPrimaryAction:s().func.isRequired,onSecondaryAction:s().func.isRequired,onInputChange:s().func.isRequired,onKeyDown:s().func.isRequired,onBackAction:s().func.isRequired,onInputFocus:s().func.isRequired};var Ue=Ie,je="addEmail",_e="verifyEmail",Le="addPhone",Be="verifyPhone",He="phoneAdded",Ve="discoverabilityConsent",qe="unset",Fe="homepage";function Ge(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,i)}function We(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Ge(o,r,i,a,c,"next",e)}function c(e){Ge(o,r,i,a,c,"throw",e)}a(void 0)}))}}function Ye(t){var r=e();return n.httpService.get(r).then((function(e){var n=e.data;return null!=n&&n.emailAddress&&(!t.requireVerification||n.verified)||(e=new CustomEvent("OpenVerificationModal",{detail:{isEmailVerified:n.verified,email:null==n?void 0:n.emailAddress,skipCallback:t.skipCallback,origin:t.origin,experimentParameters:null==t?void 0:t.experimentParameters,requireVerification:t.requireVerification,closeCallback:t.closeCallback}}),window.dispatchEvent(e)),n}),(function(e){return console.log(e),!1}))}function $e(e){return Ye({origin:A,closeCallback:e})}function ze(e){switch(e){case C:return _e;case N:return je;default:return""}}var Ke=function(){var e=We(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={retryable:!0,withCredentials:!0,url:"".concat(Z,"/v2/metadata")},e.abrupt("return",n.httpService.get(t));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Xe=function(){var e=We(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={retryable:!0,withCredentials:!0,url:"".concat(ee,"/product-experimentation-platform/v1/projects/1/layers/Website.Logout.ContactMethodModal/values")},r={parameters:Object.values(ne).join(",")},e.abrupt("return",n.httpService.get(t,r));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Je=function(){var e=We(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ke();case 2:if(null!==(n=(n=e.sent).data)&&void 0!==n&&n.IsEmailUpsellAtLogoutEnabled){e.next=5;break}return e.abrupt("return",!1);case 5:return r={},e.prev=6,e.next=9,Xe();case 9:r=e.sent,e.next=14;break;case 12:e.prev=12,e.t0=e.catch(6);case 14:return e.abrupt("return",Ye({origin:w,experimentParameters:null===(n=r)||void 0===n?void 0:n.data,skipCallback:t}));case 16:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(){return e.apply(this,arguments)}}(),Qe=K,Ze=J,et=X,tt=l=9,nt=CoreRobloxUtilities;function rt(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function it(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(n),!0).forEach((function(t){var r,i;r=e,t=n[i=t],i in r?Object.defineProperty(r,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[i]=t})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ot(e,t){nt.eventStreamService.sendEventWithTarget(e.type,e.context,it(it({},e.params),{},{origin:t.origin,section:t.section}))}function at(e,t){return(e=it({},e)).params=it(it({},e.params),{},{errorCode:t}),e}M="verificationUpsell";var ct={showModal:{name:"showModal",type:(k=nt.eventStreamService.eventTypes).modalAction,context:M,params:{aType:"shown"}},dismissModal:{name:"dismissModal",type:k.modalAction,context:M,params:{aType:"dismissed"}},touchEmail:{name:"touchEmail",type:k.formInteraction,context:M,params:{aType:"focus",field:"email"}},showError:{name:"showError",type:k.formInteraction,context:M,params:{aType:"shown",field:"errorMessage"}},clickContinue:{name:"clickContinue",type:k.formInteraction,context:M,params:{btn:"continue"}},clickSendConfirmationEmail:{name:"clickSendConfirmationEmail",type:k.formInteraction,context:M,params:{aType:"click",btn:"sendConfirmation"}},clickResendConfirmationEmail:{name:"clickResendConfirmationEmail",type:k.formInteraction,context:M,params:{aType:"click",btn:"resendConfirmation"}},clickChangeEmail:{name:"clickChangeEmail",type:k.formInteraction,context:M,params:{aType:"click",btn:"changeEmail"}},skipLogoutAnyway:{name:"skipLogoutAnyway",type:k.formInteraction,context:M,params:{aType:"click",btn:"skipLogoutAnyway"}},skipPrepurchaseVerification:{name:"skipPrepurchaseVerification",type:k.formInteraction,context:M,params:{aType:"click",btn:"skipPrepurchaseVerification"}}};function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var st=z,ut=K,dt=l;function pt(t){var o=t.translate,a=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return lt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)(!1),2),c=(t=a[0],a[1]),l=(a=Te()).emailUpsellState,s=a.dispatch;function u(){var t,r,i=ze(l.pageName);switch(l.pageName){case C:ot(ct.clickResendConfirmationEmail,{origin:l.origin,section:i}),function(){var e={retryable:!0,withCredentials:!0,url:"".concat(Q,"/v1/email/verify")};return n.httpService.post(e).then((function(){return!0}),De)}().then((function(e){!0!==e?(s({type:h,errorMsg:st}),ot(e=at(ct.showError,e),{origin:l.origin,section:i})):(s({type:b}),setTimeout((function(){s({type:g})}),15e3))}));break;case N:ot(ct.clickContinue,{origin:l.origin,section:i}),r=l.userEmailInput,/\S+@\S+\.\S+/.test(r)?(ot(ct.clickSendConfirmationEmail,{origin:l.origin,section:i}),s({type:E,isEmailUpdating:!0}),t={emailAddress:l.userEmailInput},r=e(),n.httpService.post(r,t).then((function(){return!0}),De).then((function(e){var t,n;!0!==e?(n=function(e){switch(e){case 6:return Ze;case tt:return Qe;default:return et}}(e),ot(t=at(ct.showError,e),{origin:l.origin,section:i}),s({type:h,errorMsg:n}),s({type:E,isEmailUpdating:!1})):(s({type:m,isEmailVerified:!1,userEmail:(e=l.userEmailInput,t=e.indexOf("@"),n=e.substring(0,1),"".concat(n,"*****").concat(e.substring(t)))}),s({type:S}),s({type:v,pageName:C}),s({type:f}),s({type:E,isEmailUpdating:!1}),s({type:x}))})),s({type:f})):(ot(t=at(ct.showError,dt),{origin:l.origin,section:i}),s({type:h,errorMsg:ut}))}}return(0,r.useEffect)((function(){l.pageName&&ot(ct.showModal,{origin:l.origin,section:ze(l.pageName)})}),[l.pageName]),(0,r.useEffect)((function(){window.addEventListener("OpenVerificationModal",(function(e){c(!0),s({type:P,origin:e.detail.origin,skipCallback:e.detail.skipCallback,closeCallback:e.detail.closeCallback}),s({type:m,isEmailVerified:e.detail.isEmailVerified,userEmail:e.detail.email});var t=e.detail.requireVerification&&e.detail.email?C:N;s({type:v,pageName:t}),s({type:f,experimentParameters:null===(e=e.detail)||void 0===e?void 0:e.experimentParameters})}),!1)}),[]),i().createElement("div",null,i().createElement(Ue,{show:t,onHide:function(){return ot(ct.dismissModal,{origin:l.origin,section:ze(l.pageName)}),s({type:S}),l.closeCallback&&l.closeCallback(l.isEmailAdded),void c(!1)},onPrimaryAction:u,onSecondaryAction:function(){var e=ze(l.pageName);switch(l.pageName){case C:ot(ct.clickChangeEmail,{origin:l.origin,section:e}),s({type:v,pageName:N}),s({type:f});break;case N:l.skipCallback&&(ot(l.origin===w?ct.skipLogoutAnyway:ct.skipPrepurchaseVerification,{origin:l.origin,section:e}),l.skipCallback()),s({type:S}),c(!1)}},onInputFocus:function(){ot(ct.touchEmail,{origin:l.origin,section:ze(l.pageName)})},onInputChange:function(e){s({type:y,pageName:N,value:e})},onKeyDown:function(e){return"Enter"===e&&u()},onBackAction:function(){return s({type:v,pageName:N}),void s({type:f})},translate:o}))}pt.propTypes={translate:s().func.isRequired};var mt=pt;function ft(e){return e=e.translate,i().createElement(ce,null,i().createElement(mt,{translate:e}))}ft.propTypes={translate:s().func.isRequired};var vt=(0,u.withTranslations)(ft,p),yt="CLOSE_PHONE_NUMBER_MODAL",ht="SET_ERROR_MESSAGE",bt="SET_PHONE_NUMBER",gt="SET_COUNTRY",Et="SET_PAGE",Pt="SET_PHONE_VERIFICATION_STATUS",St="SET_PREFIX_OPTIONS_LIST",xt="SET_LOGGING_VALUES",Ct="SET_DISCOVERABILITY_CONSENT_PREFILL",Nt="Action.Continue",wt=(T="Action.AddPhoneNumber","Label.PhoneNumber"),At=(R="Message.InvalidSmsCode",I="Description.VerificationCodeSmsFeesMayApply",D="Description.PhoneNumberNeverPublic",V="Description.ShortCodeLegalDisclaimer",_="Response.PhoneNumberAlreadyLinked",L="Response.TooManyVerificationAttempts",B="Response.PhoneHasTooManyAssociatedAccounts",H="Response.ErrorPhoneFormatInvalid",G="Response.InvalidPhoneNumberError",F="Response.ErrorTryAgain",q='<a href="https://en.help.roblox.com/hc/articles/9483830673556-Roblox-SMS-Terms-of-Service">',W='<a href="https://en.help.roblox.com/hc/articles/115004630823">',Y="</a>",$="US",function(e){return"+".concat(e)}),Ot=function(e,t){return"".concat(e," +(").concat(t,")")},Tt=(U=2,j=3,J=6,X=8,k=9,M=7,z=6,"ADD_PHONE_NUMBER_PAGE"),Mt="VERIFY_PHONE_NUMBER_PAGE",kt="ADD_PHONE_SUCCESS_PAGE",Rt="PHONE_DISCOVERABILITY_CONSENT_PAGE",It=(l="verificationUpsell",{phoneNumberModalDismissed:{name:"phoneNumberModalDismissed",type:(K=nt.eventStreamService.eventTypes).modalAction,context:l,params:{aType:"dismissed"}},phoneNumberModalShown:{name:"phoneNumberModalShown",type:K.modalAction,context:l,params:{aType:"shown"}},phoneNumberModalErrorShown:{name:"phoneNumberModalErrorShown",type:K.modalAction,context:l,params:{aType:"shown",field:"errorMessage"}},addPhonePrefixPressed:{name:"addPhonePrefixPressed",type:K.formInteraction,context:l,params:{aType:"focus",field:"countryPrefix"}},addPhonePhoneNumberPressed:{name:"addPhonePhoneNumberPressed",type:K.formInteraction,context:l,params:{aType:"focus",field:"phoneNumber"}},addPhoneContinuePressed:{name:"addPhoneContinuePressed",type:K.formInteraction,context:l,params:{btn:"continue"}},verifyPhoneChangePhoneNumberPressed:{name:"verifyPhoneChangePhoneNumberPressed",type:K.formInteraction,context:l,params:{btn:"changePhoneNumber"}},verifyPhoneCodeFieldPressed:{name:"verifyPhoneCodeFieldPressed",type:K.formInteraction,context:l,params:{aType:"focus",field:"verificationCode"}},verifyPhoneContinuePressed:{name:"verifyPhoneContinuePressed",type:K.formInteraction,context:l,params:{btn:"continue"}},verifyPhoneResendPressed:{name:"verifyPhoneResendPressed",type:K.formInteraction,context:l,params:{btn:"resendCode"}},phoneAddedDonePressed:{name:"phoneAddedDonePressed",type:K.formInteraction,context:l,params:{btn:"done"}}});function Dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ut(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ut(Object(n),!0).forEach((function(t){var r,i;r=e,t=n[i=t],i in r?Object.defineProperty(r,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[i]=t})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _t(e,t){var n;switch(t.type){case bt:return jt(jt({},e),{},{phone:t.phone,errorMessage:""});case gt:return jt(jt({},e),{},{phonePrefixPickerIndex:t.phonePrefixPickerIndex,errorMessage:""});case ht:return jt(jt({},e),{},{errorMessage:t.errorMessage});case Et:return jt(jt({},e),{},{errorMessage:"",pageName:t.pageName});case Pt:return jt(jt({},e),{},{isPhoneVerified:t.isPhoneVerified});case Ct:return jt(jt({},e),{},{shouldPrefillAffirmativeDiscoverabilityConsent:null!==(n=null==t?void 0:t.shouldPrefillAffirmativeDiscoverabilityConsent)&&void 0!==n&&n});case St:return jt(jt({},e),{},{phonePrefixOptionsList:t.phonePrefixOptionsList});case xt:return jt(jt({},e),{},{origin:t.origin});case yt:return jt(jt({},Bt),{},{isOpen:!1,errorMessage:""});default:return Bt}}function Lt(e){var t=e.children,n=(e=(n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useReducer)(_t,Bt),2))[0],n[1]);return i().createElement(Ht.Provider,{value:{phoneUpsellState:e,dispatch:n}},t)}var Bt={isOpen:!0,pageName:Tt,errorMessage:"",origin:qe,phone:"",isPhoneVerified:!1,phonePrefixPickerIndex:0,phonePrefixOptionsList:[],shouldDiscoverabilityConsentDefaultYes:!1},Ht=(0,r.createContext)(Bt);function Vt(){return(0,r.useContext)(Ht)}function qt(){var e={retryable:!0,withCredentials:!0,url:"".concat(ee,"/phone-number-api/v1/phone-prefix-list")};return n.httpService.get(e).then((function(e){var t,n=e.data,r=null!==(e=null==(e=n.find((function(e){return!0===e.isDefault})))?void 0:e.code)&&void 0!==e?e:$t;return n.filter((function(e){return e.code!==r||(t=e,!1)})),t&&n.unshift(t),n}),(function(e){return!1}))}function Ft(e){var t=e.phone,r=e.prefix,i=e.countryCode;e={retryable:!0,withCredentials:!0,url:"".concat(te,"/v1/phone")},t={countryCode:i,prefix:r,phone:t};return n.httpService.post(e,t)}function Gt(e){var t={code:0<arguments.length&&void 0!==e?e:""};e={retryable:!0,withCredentials:!0,url:"".concat(te,"/v1/phone/verify")};return n.httpService.post(e,t)}function Wt(e){var t={retryable:!0,withCredentials:!0,url:"".concat(te,"/v1/phone/resend")};e=e||{};return n.httpService.post(t,e).then((function(e){return e.data,!0}),(function(e){return!1}))}function Yt(e){switch(e){case Tt:return Le;case Mt:return Be;case kt:return He;case Rt:return Ve;default:return""}}Lt.propTypes={children:s().node.isRequired};var $t=$,zt=_,Kt=L,Xt=H,Jt=G,Qt=F,Zt=B,en=R,tn=j,nn=J,rn=k,on=U,an=X,cn=M,ln=z;function sn(e){var t=e.translate;e=Vt().phoneUpsellState;return i().createElement("p",{className:"input-field-error-text sms-code-error text-error modal-error-message"},e.errorMessage?t(e.errorMessage):null)}sn.propTypes={translate:s().func.isRequired};var un=sn;function dn(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,i)}function pn(e){var t=e.translate,n=(u=Vt()).phoneUpsellState,o=u.dispatch,a=At,c=Ot,l=n.phone,s=(e=n.phonePrefixPickerIndex,n.phonePrefixOptionsList),u=n.pageName,d=n.origin,p=(n="upsell-phone-number-number",Yt(u));(0,r.useEffect)((function(){function e(){var t;return t=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===(t=s).length)return e.next=4,qt();e.next=6;break;case 4:t=e.sent,o({type:St,phonePrefixOptionsList:t});case 6:case"end":return e.stop()}}),e)})),(e=function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(e){dn(o,r,i,a,c,"next",e)}function c(e){dn(o,r,i,a,c,"throw",e)}a(void 0)}))}).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var m=null!==(m=null==s||null===(m=s[e])||void 0===m?void 0:m.prefix)&&void 0!==m?m:"";return i().createElement("div",null,i().createElement("label",{htmlFor:n},i().createElement("p",{className:"verification-code-label font-caption-header text-primary"},t(wt))),i().createElement("div",{id:"upsell-phone",className:"phone-number-input-container input-field form-control"},i().createElement("div",{id:"upsell-phonenumber",className:"phone-input-row"},i().createElement("span",{className:"phone-prefix-wrapper"},i().createElement("div",{className:"phone-prefix-selected text"},a(m)),i().createElement("select",{className:"phone-prefix-dropdown input-field rbx-select",onChange:function(e){e=e.target.value,o({type:gt,phonePrefixPickerIndex:e})},onFocus:function(){ot(It.addPhonePrefixPressed,{origin:d,section:p})},value:e},s.map((function(e,t){return i().createElement("option",{className:"prefix-option",value:t},c(e.localizedName,e.prefix))})))),i().createElement("div",{id:"upsell-phonenumber-divider",className:"phone-divider"}),i().createElement("input",{id:n,type:"tel",value:l,className:"phone-input form-control",placeholder:t(wt),autoComplete:"tel-national",onChange:function(e){return o({type:bt,phone:e.target.value})},onFocus:function(){ot(It.addPhonePhoneNumberPressed,{origin:d,section:p})}}))))}pn.propTypes={translate:s().func.isRequired};var mn=pn;function fn(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,i)}function vn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return yn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var hn=T,bn=Nt,gn=I,En=D,Pn=V,Sn=Y,xn=W,Cn=q,Nn=(!!a.DeviceMeta&&(0,a.DeviceMeta)()).isInApp;function wn(e){var t=e.translate,n=e.onHide,o=(p=Vt()).phoneUpsellState,a=p.dispatch,c=o.phone,l=o.phonePrefixPickerIndex,s=o.phonePrefixOptionsList,u=o.pageName,d=o.origin,p=(e=vn((0,r.useState)(!1),2))[0],m=e[1],f=(e=(o=vn((0,r.useState)(!1),2))[0],o[1]),v=Yt(u);(0,r.useEffect)((function(){var e=null==s||null===(e=s[l])||void 0===e?void 0:e.code;f("US"!==e)}),[s,l]);u=t(Pn,{linkTagWithSmsTos:Cn,linkTagWithPrivacyPolicy:xn,linkTagEnd:Sn});var y=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),n=s[l],t=n.prefix,n=n.code,ot(It.addPhoneContinuePressed,{origin:d,section:v}),e.next=5,Ft({phone:c,prefix:t,countryCode:n}).then((function(){a({type:Et,pageName:Mt})})).catch((function(e){var t=De(e);ot(e=at(It.phoneNumberModalErrorShown,t),{origin:d,section:v}),a({type:ht,errorMessage:function(e){switch(e){case tn:return zt;case nn:return Kt;case on:return Xt;case an:return Jt;case rn:return Zt;default:return Qt}}(t)})})).finally((function(){m(!1)}));case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){fn(o,r,i,a,c,"next",e)}function c(e){fn(o,r,i,a,c,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();return i().createElement("div",null,i().createElement(Me.Modal.Header,{useBaseBootstrapComponent:!0},i().createElement("div",{className:"verification-upsell-title-container"},i().createElement("button",{type:"button",hidden:Nn,className:"verification-upsell-title-button",onClick:n},i().createElement("span",{className:"close icon-close"})),i().createElement(Me.Modal.Title,{id:"contained-modal-title-vcenter"},t(hn)))),i().createElement(Me.Modal.Body,null,i().createElement("div",{className:"phone-number-submission-container"},i().createElement("div",{className:"verification-upsell-text-body text-description"},t(gn)),i().createElement(mn,{translate:t}),i().createElement("div",{className:"phone-verification-nonpublic-text text-description font-caption-body"},t(En)),i().createElement(un,{translate:t}))),i().createElement(Me.Modal.Footer,null,i().createElement("div",{className:"text-description font-caption-body phone-verification-legal-text",hidden:e,dangerouslySetInnerHTML:{__html:u}}),i().createElement("div",{className:"buttons-section"},i().createElement(Me.Button,{type:"button",id:"add-phone-number-continue-button",className:"accept-btn",variant:Me.Button.variants.primary,isDisabled:p||0===c.length,onClick:function(){return y()}},t(bn)))))}wn.propTypes={translate:s().func.isRequired,onHide:s().func.isRequired};var An=wn,On="CloseContactMethodUpsellWebview";function Tn(e){var t=e.translate,n=(s=Vt()).phoneUpsellState,r=s.dispatch,o=On,c=n.origin,l=n.pageName,s=(e="Heading.PhoneIsVerified","Description.PhoneForRecovery"),u=(n="Action.Done",(!!a.DeviceMeta&&(0,a.DeviceMeta)()).isInApp),d=Yt(l);return i().createElement("div",null,i().createElement(Me.Modal.Body,null,i().createElement("div",{className:"phone-number-verification-upsell-image"}),i().createElement("div",{className:"verification-upsell-title-container phone-number-verification-success-page-title page-title"},i().createElement(Me.Modal.Title,{id:"contained-modal-title-vcenter"},t(e))),i().createElement("div",{className:"phone-number-verification-text-body text-description"},t(s))),i().createElement(Me.Modal.Footer,null,i().createElement("button",{type:"button",className:"btn-cta-md btn-max-width phone-number-verify-button",onClick:function(){ot(It.phoneAddedDonePressed,{origin:c,section:d}),u&&a.Hybrid&&a.Hybrid.Navigation?a.Hybrid.Navigation.navigateToFeature({feature:o}):r({type:yt})}},t(n))))}function Mn(){var e={retryable:!0,withCredentials:!0,url:"".concat(ee,"/user-settings-api/v1/user-settings/metadata")};return n.httpService.get(e).then((function(e){return e.data}),(function(e){return null}))}function kn(e){var t={retryable:!0,withCredentials:!0,url:"".concat(ee,"/user-settings-api/v1/user-settings")};e={phoneNumberDiscoverability:e};return n.httpService.post(t,e).then((function(e){return!0})).catch((function(){return!1}))}Tn.propTypes={translate:s().func.isRequired};var Rn=Tn,In="NotDiscoverable",Dn="Discoverable";function Un(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return jn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _n(e){var t=e.translate,n=e.shouldPrefillAffirmativeDiscoverabilityConsent,o=e.origin,c=Vt().dispatch,l=On,s=(!!a.DeviceMeta&&(0,a.DeviceMeta)()).isInApp,u=(p=Un((0,r.useState)(n?Dn:"Unset"),2))[0],d=p[1],p=(e=Un((0,r.useState)(!1),2))[0],m=e[1];e=function(e){d(e.currentTarget.value),nt.eventStreamService.sendEventWithTarget("discoverabilityPageRadioButtonClick",e.currentTarget.value,{origin:o})};return(0,r.useEffect)((function(){nt.eventStreamService.sendEventWithTarget("discoverabilityPageLoad","phoneVerificationUpsell",{version:n?"non_eu_version":"eu_version",origin:o})}),[]),i().createElement("div",{className:"phone-discoverability-consent"},i().createElement(Me.Modal.Body,{className:"verification-grid"},i().createElement("span",{className:"icon-spot-success-xl verification-grid-icon"}),i().createElement("div",{className:"discoverability-text-section"},i().createElement("div",{className:"verification-upsell-title-container page-title "},i().createElement(Me.Modal.Title,null,t("Header.PhoneIsVerified"))),i().createElement("div",{className:"text-description"},t("Description.CanUsePhoneForRecovery"))),i().createElement("span",{className:"icon-spot-find-friends-xl verification-grid-icon"}),i().createElement("div",{className:"discoverability-text-section"},i().createElement("div",{className:"verification-upsell-title-container page-title"},i().createElement(Me.Modal.Title,null,t("Header.LetFriendsFindYou"))),i().createElement("div",{className:"text-description"},t("Description.WantToBeRecommendedViaPhone"))),i().createElement("div",{className:"verification-grid-icon"}),i().createElement("div",{className:"discoverability-radio-button-section"},i().createElement("div",{className:"radio discoverability-consent-option"},i().createElement("input",{type:"radio",name:"discoverability-options",id:"consent-radio-button",value:Dn,checked:u===Dn,onClick:e}),i().createElement("label",{className:"text-description",htmlFor:"consent-radio-button"},t("Label.Yes"))),i().createElement("div",{className:"radio discoverability-consent-option"},i().createElement("input",{type:"radio",name:"discoverability-options",id:"no-consent-radio-button",value:In,checked:u===In,onClick:e}),i().createElement("label",{className:"text-description",htmlFor:"no-consent-radio-button"},t("Label.No")))),i().createElement("div",{className:"verification-grid-icon"}),i().createElement("div",null,i().createElement("div",{className:"text-secondary"},t("Description.PhoneDiscoverabilityPrivacy")),i().createElement("a",{className:"text-secondary text-link learn-more-link",target:"_blank",rel:"noreferrer",href:"https://en.help.roblox.com/hc/articles/7416652004884"},t("Action.LearnMore")))),i().createElement(Me.Modal.Footer,null,i().createElement(un,{translate:t}),i().createElement("button",{type:"button",className:"btn-cta-md btn-max-width phone-number-verify-button",disabled:p,onClick:function(){m(!0),nt.eventStreamService.sendEventWithTarget("discoverabilityPageClick",u,{origin:o}),kn(u).then((function(e){return!0!==e?(m(!1),void c({type:ht,errorMessage:"Response.ErrorTryAgain"})):(c({type:ht,errorMessage:""}),void(s&&a.Hybrid&&a.Hybrid.Navigation?a.Hybrid.Navigation.navigateToFeature({feature:l}):c({type:yt})))}))}},t("Action.Done"))))}_n.propTypes={origin:s().string.isRequired,translate:s().func.isRequired,shouldPrefillAffirmativeDiscoverabilityConsent:s().bool.isRequired};var Ln=_n;function Bn(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,i)}function Hn(e){return e.replace(/[^0-9]/g,"").substring(0,qn)}var Vn=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(t=kt),e.next=4,Mn();case 4:return!0===(null==(r=e.sent)?void 0:r.isDiscoverabilitySettingsEnabled)&&!0===(null==r?void 0:r.showDiscoverabilityUpsells)&&(t=Rt,n=!0===(null==r?void 0:r.prefillDiscoverabilitySetting)),e.abrupt("return",{successPage:t,shouldPrefillAffirmativeDiscoverabilityConsent:n});case 7:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Bn(o,r,i,a,c,"next",e)}function c(e){Bn(o,r,i,a,c,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),qn=6;function Fn(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Gn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fn(Object(n),!0).forEach((function(t){var r,i;r=e,t=n[i=t],i in r?Object.defineProperty(r,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[i]=t})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wn(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,i)}function Yn(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Wn(o,r,i,a,c,"next",e)}function c(e){Wn(o,r,i,a,c,"throw",e)}a(void 0)}))}}function $n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return zn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kn(e){var t=e.translate,n=e.onHide,o=(N=Vt()).phoneUpsellState,c=N.dispatch,l=o.phone,s=o.phonePrefixOptionsList,u=o.phonePrefixPickerIndex,d=o.pageName,p=o.origin,m=(w=$n((0,r.useState)({code:"",isReadyToSubmitCode:""}),2))[0],f=w[1],v=(!!a.DeviceMeta&&(0,a.DeviceMeta)()).isInApp,y=v,h=Yt(d),b=(A=$n((0,r.useState)(0),2))[0],g=A[1],E=(O=$n((0,r.useState)(!1),2))[0],P=O[1],S=(T=$n((0,r.useState)(kt),2))[0],x=T[1],C=Nt,N=(e="Action.ResendCode","Action.CodeResent"),w="Label.EnterCode",A=(d="Heading.VerificationCode","verification-code-input"),O=" (",T=")";l=function(e,t){return"\n+".concat(e).concat(t)}(s[u].prefix,l);function M(){return(M=Yn(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ot(It.verifyPhoneContinuePressed,{origin:p,section:h}),6!==m.code.length)return e.abrupt("return");e.next=3;break;case 3:return P(!0),c({type:ht,errorMessage:""}),e.prev=5,e.next=8,Gt(m.code);case 8:c({type:Pt,isPhoneVerified:!0}),c({type:Et,pageName:S}),v&&a.Hybrid&&a.Hybrid.Navigation&&a.Hybrid.Navigation.navigateToFeature({feature:"CompletedContactMethodUpsellWebview"}),e.next=20;break;case 13:e.prev=13,e.t0=e.catch(5),n=De(e.t0),t=function(e){switch(e){case ln:return Kt;case cn:return en;default:return Qt}}(n),ot(n=at(It.phoneNumberModalErrorShown,n),{origin:p,section:h}),c({type:ht,errorMessage:t});case 20:return e.prev=20,f(Gn(Gn({},m),{},{isReadyToSubmitCode:!1})),P(!1),e.finish(20);case 24:case"end":return e.stop()}}),e,null,[[5,13,20,24]])})))).apply(this,arguments)}return(0,r.useEffect)((function(){function e(){return(e=Yn(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vn();case 2:n=e.sent,t=n.successPage,n=n.shouldPrefillAffirmativeDiscoverabilityConsent,c({type:Ct,shouldPrefillAffirmativeDiscoverabilityConsent:n}),x(t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),(0,r.useEffect)((function(){m.isReadyToSubmitCode&&function(){M.apply(this,arguments)}()}),[m]),i().createElement("div",null,i().createElement(Me.Modal.Header,{useBaseBootstrapComponent:!0},i().createElement("div",{className:"verification-upsell-title-container"},i().createElement("button",{type:"button",className:"verification-upsell-title-button",hidden:y,onClick:n},i().createElement("span",{className:"close icon-close"})),i().createElement(Me.Modal.Title,{id:"contained-modal-title-vcenter"},t("Heading.VerifyYourPhone")))),i().createElement(Me.Modal.Body,null,i().createElement("div",{className:"phone-number-verification-upsell-image"}),i().createElement("div",{className:"verification-upsell-text-body text-description"},t(w,{phoneNumber:l})),i().createElement("button",{type:"button",className:"phone-number-change-number-button phone-number-text-button",onClick:function(){ot(It.verifyPhoneChangePhoneNumberPressed,{origin:p,section:h}),c({type:Et,pageName:Tt})}},t("Action.ChangePhoneNumber")),i().createElement("label",{htmlFor:A},i().createElement("p",{className:"verification-code-label font-caption-header text-primary"},t(d))),i().createElement("input",{id:A,type:"text",inputMode:"numeric",className:"".concat(o.errorMessage?"input-field-error":""," form-control input-field input-number verification-code-input"),onChange:function(e){return e=e.target.value,c({type:ht,errorMessage:""}),void f(Gn(Gn({},m),{},{code:Hn(e)}))},onPaste:function(e){e=Hn(e=(e.clipboardData||window.clipboardData).getData("text")),f({code:e,isReadyToSubmitCode:!0})},autoComplete:"one-time-code",placeholder:"000000",onKeyDown:function(e){"Enter"===e.key&&f(Gn(Gn({},m),{},{isReadyToSubmitCode:!0}))},onFocus:function(){ot(It.verifyPhoneCodeFieldPressed,{origin:p,section:h})},value:m.code}),i().createElement(un,{translate:t})),i().createElement(Me.Modal.Footer,null,i().createElement("button",{type:"button",className:"btn-cta-md btn-max-width phone-number-verify-button",disabled:E||6!==m.code.length,onClick:function(){f(Gn(Gn({},m),{},{isReadyToSubmitCode:!0}))}},t(C)),0===b?i().createElement("button",{type:"button",className:" btn-secondary-md btn-max-width phone-number-resent-button",onClick:function(){var e;ot(It.verifyPhoneResendPressed,{origin:p,section:h}),0===b&&(Wt(),0===b&&(e=setInterval((function(){g((function(t){return 1===t&&clearInterval(e),t-1}))}),1e3)),g(10))}},t(e)):i().createElement("button",{type:"button",className:" btn-secondary-md btn-max-width phone-number-resent-button btn-max-width resend-button-disabled"},t(N),i().createElement("span",null,O+b+T))))}Kn.propTypes={translate:s().func.isRequired,onHide:s().func.isRequired};var Xn=Kn;function Jn(e){function t(){d||(ot(It.phoneNumberModalDismissed,{origin:l.origin,section:u}),o(l.isPhoneVerified),s({type:yt}))}var n=e.translate,o=e.onClose,c=e.origin,l=(e=Vt()).phoneUpsellState,s=e.dispatch,u=Yt(l.pageName),d=(!!a.DeviceMeta&&(0,a.DeviceMeta)()).isInApp;return(0,r.useEffect)((function(){l.origin!==qe&&ot(It.phoneNumberModalShown,{origin:l.origin,section:u})}),[l.pageName,l.origin]),(0,r.useEffect)((function(){s({type:xt,origin:c})}),[]),i().createElement(Me.Modal,{show:l.isOpen,onHide:t,className:d?"verification-modal phone-verification-webview":"verification-modal",size:"lg","aria-labelledby":"contained-modal-title-vcenter",scrollable:"true",centered:"true"},function(){switch(l.pageName){case Tt:return i().createElement(An,{translate:n,onHide:t});case Mt:return i().createElement(Xn,{translate:n,onHide:t});case kt:return i().createElement(Rn,{translate:n,onHide:t});case Rt:return i().createElement(Ln,{translate:n,onHide:t,origin:l.origin,shouldPrefillAffirmativeDiscoverabilityConsent:l.shouldPrefillAffirmativeDiscoverabilityConsent});default:return i().createElement(An,{translate:n,onHide:t})}}())}Jn.propTypes={translate:s().func.isRequired,onClose:s().func.isRequired,origin:s().string},Jn.defaultProps={origin:Fe};var Qn=Jn;function Zn(e){var t=e.translate,n=e.onClose;e=e.origin;return i().createElement(Lt,null,i().createElement(Qn,{translate:t,onClose:n,origin:e}))}Zn.propTypes={translate:s().func.isRequired,origin:s().string,onClose:s().func},Zn.defaultProps={origin:void 0,onClose:function(){return null}};var er=(0,u.withTranslations)(Zn,p),tr="CLOSE_CONTACT_METHOD_PROMPT_MODAL",nr="SET_LOGGING_VALUES";function rr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ir(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(n),!0).forEach((function(t){var r,i;r=e,t=n[i=t],i in r?Object.defineProperty(r,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[i]=t})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ir(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ar(e,t){switch(t.type){case tr:return or(or({},e),{},{isOpen:!1});case nr:return or(or({},e),{},{origin:t.origin,section:t.section});default:return lr}}function cr(e){var t=e.children,n=(e=(n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return rr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useReducer)(ar,lr),2))[0],n[1]);return i().createElement(sr.Provider,{value:{contactMethodPromptModalState:e,dispatch:n}},t)}var lr={isOpen:!0,origin:"",section:""},sr=(0,r.createContext)(lr);cr.propTypes={children:s().node.isRequired};Fe="contactMethodModal";var ur={contactMethodPromptShown:{name:"contactMethodPromptShown",type:(q=nt.eventStreamService.eventTypes).modalAction,context:Fe,params:{aType:"shown"}},contactMethodPromptDismissed:{name:"contactMethodPromptDismissed",type:q.modalAction,context:Fe,params:{aType:"dismissed"}},contactMethodPromptEmailClicked:{name:"contactMethodPromptEmailClicked",type:q.buttonClick,context:Fe,params:{btn:"email"}},contactMethodPromptPhoneClicked:{name:"contactMethodPromptPhoneClicked",type:q.buttonClick,context:Fe,params:{btn:"phone"}},contactMethodPromptSupportClicked:{name:"contactMethodPromptSupportClicked",type:q.buttonClick,context:Fe,params:{btn:"support"}},contactMethodPromptLogoutClicked:{name:"contactMethodPromptLogoutClicked",type:q.buttonClick,context:Fe,params:{btn:"logout"}}};function dr(){return(0,r.useContext)(sr)}function pr(e){function t(e){e||null!==a.UpsellService&&void 0!==a.UpsellService&&a.UpsellService.renderContactMethodPromptModal({origin:o.origin,section:o.section})}var n=e.translate,r=e.onHide,o=dr().contactMethodPromptModalState;e="Action.AddEmailAddress";return i().createElement("div",null,i().createElement(Me.Modal.Header,{useBaseBootstrapComponent:!0},i().createElement("div",{className:"verification-upsell-title-container"},i().createElement(Me.Modal.Title,{id:"contained-modal-title-vcenter"},n("Heading.VerificationRequired")))),i().createElement(Me.Modal.Body,{className:"verification-grid"},i().createElement("span",{className:"icon-spot-passcode-xl verification-grid-icon"}),i().createElement("div",null,i().createElement("div",{className:"verification-upsell-title-container page-title "},i().createElement("div",{className:"font-header-2"},n("Heading.DontGetLockedOut"))),i().createElement("div",{className:"text-description"},n("Label.RecoverIfPasswordLost"))),i().createElement("span",{className:"icon-spot-success-xl verification-grid-icon"}),i().createElement("div",null,i().createElement("div",{className:"verification-upsell-title-container page-title"},i().createElement("div",{className:"font-header-2"},n("Heading.ImproveAccountSecurity"))),i().createElement("div",{className:"text-description"},n("Label.KeepBadActorsOut")))),i().createElement(Me.Modal.Footer,null,i().createElement("button",{type:"button",className:"btn-cta-md btn-max-width phone-number-verify-button",onClick:function(){r(),ot(ur.contactMethodPromptPhoneClicked,{origin:o.origin,section:o.section}),null!==a.UpsellService&&void 0!==a.UpsellService&&a.UpsellService.renderPhoneUpsell({onClose:t})}},n("Action.AddPhoneNumber")),i().createElement("button",{type:"button",className:" btn-secondary-md btn-max-width phone-number-resent-button",onClick:function(){r(),ot(ur.contactMethodPromptEmailClicked,{origin:o.origin,section:o.section}),null!==a.UpsellService&&void 0!==a.UpsellService&&a.UpsellService.renderEmailUpsell(t)}},n(e)),i().createElement("div",null,i().createElement("div",{className:"contact-method-prompt-links"},i().createElement(Me.Link,{className:"text-default contact-method-link-button",href:"https://en.help.roblox.com/hc/articles/203313350",target:"_blank",onClick:function(){ot(ur.contactMethodPromptSupportClicked,{origin:o.origin,section:o.section})}},n("Action.Support")),i().createElement("button",{type:"button",className:"text-default contact-method-link-button",onClick:function(){ot(ur.contactMethodPromptLogoutClicked,{origin:o.origin,section:o.section}),a.NavigationService.logoutAndRedirect()}},n("Action.LogOutText"))))))}pr.propTypes={translate:s().func.isRequired,onHide:s().func.isRequired};var mr=pr;function fr(e){function t(){ot(ur.contactMethodPromptDismissed,{origin:c.origin,section:c.section}),l({type:tr})}var n=e.translate,o=e.origin,a=e.section,c=(e=dr()).contactMethodPromptModalState,l=e.dispatch;return(0,r.useEffect)((function(){l({type:nr,origin:o,section:a})}),[]),(0,r.useEffect)((function(){c.origin&&c.section&&ot(ur.contactMethodPromptShown,{origin:c.origin,section:c.section})}),[c.origin,c.section]),i().createElement(Me.Modal,{show:c.isOpen,onHide:t,keyboard:!1,className:"verification-modal",backdrop:"static",size:"lg","aria-labelledby":"contained-modal-title-vcenter",scrollable:"true",centered:"true"},i().createElement(mr,{translate:n,onHide:t}))}fr.propTypes={translate:s().func.isRequired,section:s().string.isRequired,origin:s().string.isRequired};var vr=fr;function yr(e){var t=e.translate,n=e.origin;e=e.section;return i().createElement(cr,null,i().createElement(vr,{translate:t,origin:n,section:e}))}yr.propTypes={translate:s().func.isRequired,origin:s().string.isRequired,section:s().string.isRequired};var hr=(0,u.withTranslations)(yr,p);c().UpsellService={renderEmailUpsell:function(e){(0,n.ready)((function(){var t=document.getElementById(d);t&&((0,o.unmountComponentAtNode)(t),(0,o.render)(i().createElement(vt,null),t),$e(e))}))},renderPhoneUpsell:function(e){var t=(e=0<arguments.length&&void 0!==e?e:{}).onClose,r=e.origin;(0,n.ready)((function(){var e=document.getElementById("phoneVerificationUpsell-container");e&&((0,o.unmountComponentAtNode)(e),(0,o.render)(i().createElement(er,{onClose:t,origin:r}),e))}))},renderContactMethodPromptModal:function(e){var t=e.origin,r=e.section;(0,n.ready)((function(){var e=document.getElementById("contactMethodPrompt-container");e&&((0,o.unmountComponentAtNode)(e),(0,o.render)(i().createElement(hr,{origin:t,section:r}),e))}))}},c().EmailVerificationService={handleUserEmailUpsellAtLogout:Je,handleUserEmailUpsellAtBuyRobux:function(e){return Ye({origin:"buyRobuxPage",skipCallback:e})},handleUserEmailUpsellOnHomePage:$e,handleUserEmailVerificationRequiredByPurchaseWarning:function(){return Ye({origin:"purchaseWarning",requireVerification:!0})},handleUserEmailUpsellAtPremiumSubscription:function(e){return Ye({origin:"premiumSubscriptionPage",skipCallback:e})},handleUserEmailVerificationRequiredByBan:function(){return Ye({origin:O,requireVerification:!0})}},(0,n.ready)((function(){document.getElementById(d)&&(0,o.render)(i().createElement(vt,null),document.getElementById(d))}))}(),window.Roblox&&window.Roblox.BundleDetector&&window.Roblox.BundleDetector.bundleDetected("VerificationUpsell");