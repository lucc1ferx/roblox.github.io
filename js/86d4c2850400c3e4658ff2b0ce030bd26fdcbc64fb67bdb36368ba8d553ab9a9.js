!function(){var e={7308:function(e,t,r){var a={"./resources.js":2492};function n(e){return e=s(e),r(e)}function s(e){if(r.o(a,e))return a[e];throw(e=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",e}n.keys=function(){return Object.keys(a)},n.resolve=s,(e.exports=n).id=7308},9503:function(e,t,r){var a={"./aliasesContainerController.js":5907,"./changeAliasController .js":6946};function n(e){return e=s(e),r(e)}function s(e){if(r.o(a,e))return a[e];throw(e=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",e}n.keys=function(){return Object.keys(a)},n.resolve=s,(e.exports=n).id=9503},5855:function(e,t,r){var a={"./aliasesContainerDirective.js":6333};function n(e){return e=s(e),r(e)}function s(e){if(r.o(a,e))return a[e];throw(e=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",e}n.keys=function(){return Object.keys(a)},n.resolve=s,(e.exports=n).id=5855},6211:function(e,t,r){var a={"./contactsService.js":6638,"./friendsService.js":6861,"./layoutService.js":215};function n(e){return e=s(e),r(e)}function s(e){if(r.o(a,e))return a[e];throw(e=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",e}n.keys=function(){return Object.keys(a)},n.resolve=s,(e.exports=n).id=6211},1943:function(e,t,r){var a={"./directives/templates/aliasesContainer.html":8713,"./directives/templates/changeAliasModal.html":545};function n(e){return e=s(e),r(e)}function s(e){if(r.o(a,e))return a[e];throw(e=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",e}n.keys=function(){return Object.keys(a)},n.resolve=s,(e.exports=n).id=1943},3544:function(e){function t(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function r(e){return e.split("/").pop().replace(".html","")}var a={importFilesUnderPath:function(e){e.keys().forEach(e)},templateCacheGenerator:function(e,a,n,s){return e.module(a,[]).run(["$templateCache",function(e){n&&n.keys().forEach((function(a){var s=t(r(a));e.put(s,n(a))})),s&&s.keys().forEach((function(a){var n=t(r(a));e.put(n,s(a).replace(/<\/?script[^>]*>/gi,""))}))}])}};e.exports=a},2907:function(e,t,r){"use strict";var a=r(792),n=r(5734);n=r.n(n)().module("aliases",["aliasesAppTemplates","modal"]).config(["languageResourceProvider",function(e){var t=(new a.TranslationResourceProvider).getTranslationResource("Feature.Profile");e.setTranslationResources([t])}]);t.Z=n},2492:function(e,t,r){"use strict";r.r(t);var a=r(792);r=r(2907),a={templateUrls:{aliasesContainer:"aliases-container"},httpUrlConfig:{getTags:{url:"".concat(a.EnvironmentUrls.contactsApi,"/v1/user/get-tags"),withCredentials:!0},setUserTag:{url:"".concat(a.EnvironmentUrls.contactsApi,"/v1/user/tag"),withCredentials:!0},getFriendsStatus:{url:"".concat(a.EnvironmentUrls.friendsApi,"/v1/users/{userId}/friends/statuses"),withCredentials:!0},getAliasesGuacConfig:{url:"".concat(a.EnvironmentUrls.apiGatewayUrl,"/universal-app-configuration/v1/behaviors/aliases/content"),withCredentials:!0}},modals:{changeAlias:{templateUrl:"change-alias-modal",controllerName:"changeAliasController"}},maxCharactersForUserTag:20,friendsStatus:{friends:"Friends"},responseStatus:{moderated:"Moderated"}};r.Z.constant("aliasesResources",a),t.default=a},5907:function(e,t,r){"use strict";r.r(t);var a=r(792);r=r(2907);function n(e,t){var r,a=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)),a}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){var a,n;a=e,t=r[n=t],n in a?Object.defineProperty(a,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[n]=t})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r,n,o,i,l,c,u){e.changeAlias=function(){var t=i.modals.changeAlias.templateUrl,r={layout:e.layout,library:e.library};r={animation:!1,templateUrl:t,controller:i.modals.changeAlias.controllerName,resolve:{injectedData:r}};a.EventStream.SendEvent("userTag","attempt",{userId:e.library.currentUserId,targetUserId:e.library.currentProfileUserId,alias:null}),l.open(r).result.then((function(){}),(function(){}))},e.retrieveCurrentProfileUserId=function(){var e=n.location.pathname.match(/[0-9]+/);return e?e[0]:null},e.setup=function(){var t=parseInt(e.retrieveCurrentProfileUserId()),r=parseInt(a.CurrentUser.userId);e.layout=s({},o.aliasesLayout),e.layout.maxCharactersForUserTag=i.maxCharactersForUserTag,e.library=s({},o.defaultLibrary),e.library.currentProfileUserId=t,e.library.currentUserId=r,e.library.isProfileUserNotCurrentUser=r&&!isNaN(t)&&t!==r},e.init=function(){e.setup(),e.library.isProfileUserNotCurrentUser?c.getAliasesGuacConfig().then((function(t){t=void 0!==(t=t.areAliasesEnabled)&&t,e.aliasesEnabled=t,e.aliasesEnabled&&u.getFriendsStatus(e.library.currentUserId,[e.library.currentProfileUserId]).then((function(t){if(r.isAliasesLoaded=!0,t&&t.data){var a,n=t.data;for(a in n)n[a].status===i.friendsStatus.friends&&(e.layout.isAliasesShown=!0);e.layout.isAliasesShown&&c.getUserTags(e.library.currentProfileUserId).then((function(t){t&&0<t.length&&t.forEach((function(t){t.targetUserId===e.library.currentProfileUserId&&(t=t.targetUserTag,e.library.currentUserTag=t,e.library.userTag=t)}))}))}}),(function(){r.isAliasesLoaded=!0}))})).catch((function(){e.aliasesEnabled=!1})).finally((function(){r.isAliasesLoaded=!0})):r.isAliasesLoaded=!0},e.init()}o.$inject=["$scope","$log","$rootScope","$window","aliasesLayoutService","aliasesResources","$uibModal","contactsService","aliasesFriendsService"],r.Z.controller("aliasesContainerController",o),t.default=o},6946:function(e,t,r){"use strict";r.r(t);var a=r(5734),n=r.n(a);r=r(2907);function s(e,t,r,a,s,o,i){e.modalData=s,e.modalLayout=n().copy(o.changeAliasModalLayout),e.saveUserTag=function(){var t=e.modalData.library.currentProfileUserId,n=e.modalData.library.userTag;e.modalData.library.currentUserTag,r.setUserTag(t,n).then((function(){e.modalData.library.currentUserTag=e.modalData.library.userTag,a.dismiss()}),(function(t){var r;t&&t.data&&(r=t.data.status,t=e.modalLayout.setUserTagResponses,r===i.responseStatus.moderated&&(e.modalData.library.userTag="",e.modalLayout.displayError=t.moderationError)),e.modalLayout.isRequestFailed=!0}))},e.close=function(){e.modalData.library.userTag=e.modalData.library.currentUserTag,a.dismiss()},e.resetInputStatus=function(){e.modalLayout.isRequestFailed=!1}}s.$inject=["$scope","$log","contactsService","$uibModalInstance","injectedData","aliasesLayoutService","aliasesResources"],r.Z.controller("changeAliasController",s),t.default=s},6333:function(e,t,r){"use strict";function a(e){return{restrict:"A",replace:!1,templateUrl:e.templateUrls.aliasesContainer}}r.r(t),r=r(2907),a.$inject=["aliasesResources"],r.Z.directive("aliasesContainer",a),t.default=a},6638:function(e,t,r){"use strict";function a(e,t,r,a){return{getAliasesGuacConfig:function(){return t.httpGet(r.httpUrlConfig.getAliasesGuacConfig,{})},getUserTags:function(e){return e={targetUserIds:[e]},t.httpPost(r.httpUrlConfig.getTags,e)},setUserTag:function(e,n){return n={targetUserId:e,userTag:n},t.httpPost(r.httpUrlConfig.setUserTag,n,!0).then((function(e){if(e.data&&e.data.status===r.responseStatus.moderated)return a.reject(e)}))}}}r.r(t),r=r(2907),a.$inject=["$log","httpService","aliasesResources","$q"],r.Z.factory("contactsService",a),t.default=a},6861:function(e,t,r){"use strict";function a(e,t,r){return{getFriendsStatus:function(a,n){var s={userIds:n};n=t.httpUrlConfig.getFriendsStatus.url;return t.httpUrlConfig.getFriendsStatus.url=r("formatString")(n,{userId:a}),e.httpGet(t.httpUrlConfig.getFriendsStatus,s)}}}r.r(t),r=r(2907),a.$inject=["httpService","aliasesResources","$filter"],r.Z.factory("aliasesFriendsService",a),t.default=a},215:function(e,t,r){"use strict";function a(e,t){return{defaultLibrary:{currentProfileUserId:0,currentUserTag:"",userTag:""},aliasesLayout:{label:t.get("Label.Alias"),changeAliasTile:t.get("Label.ChangeAlias"),changeAliasDescription:t.get("Description.ChangeAlias"),modalClose:t.get("Action.Close"),modalSave:t.get("Action.Save"),modalCancel:t.get("Label.Cancel"),isAliasesShown:!1},changeAliasModalLayout:{isRequestFailed:!1,displayError:t.get("Message.AliasHasError"),setUserTagResponses:{defaultError:t.get("Message.AliasHasError"),moderationError:t.get("Message.AliasIsModerated")}}}}r.r(t),r=r(2907),a.$inject=["$log","languageResource"],r.Z.factory("aliasesLayoutService",a),t.default=a},8713:function(e){e.exports='<div class="border-top" ng-controller="aliasesContainerController" ng-show="layout.isAliasesShown"> <div class="user-tag-header"> <span class="font-header-2" ng-bind="layout.label"></span> <button class="btn-generic-edit-sm" ng-click="changeAlias()"> <span class="icon-edit"></span> </button> </div> <div class="font-header-2 text-subheader user-tag" ng-bind="library.currentUserTag"></div> </div>'},545:function(e){e.exports='<div id="change-alias" class="modal-content"> <div class="modal-header"> <button type="button" class="close" ng-click="close()"> <span aria-hidden="true"><span class="icon-close"></span></span> <span class="sr-only">{{modalData.layout.modalClose}}</span> </button> <h5>{{modalData.layout.changeAliasTile}}</h5> </div> <form name="nameForm"> <div class="modal-body"> <div ng-class="{\'form-has-error\': modalLayout.isRequestFailed, \'form-has-feedback\': modalLayout.isRequestFailed }" class="form-change-alias"> <input type="text" focus-me="true" ng-model="modalData.library.userTag" maxlength="{{modalData.layout.maxCharactersForUserTag}}" class="form-control input-field" autocomplete="off" ng-change="resetInputStatus()"/> <div class="clearfix font-caption-body change-alias-feedback-container"> <p class="text-description font-caption-body"> {{modalData.layout.changeAliasDescription}} </p> <span class="count-down">{{modalData.library.userTag.length}}/{{modalData.layout.maxCharactersForUserTag}}</span> </div> <p ng-class="{\'invisible\': modalLayout.isRequestFailed }" class="font-caption-body form-control-feedback" ng-bind="modalLayout.displayError"></p> </div> </div> <div class="modal-footer"> <button class="btn-primary-md btn-min-width" ng-click="saveUserTag()"> {{modalData.layout.modalSave}} </button> <button class="btn-secondary-md btn-min-width" ng-click="close()"> {{modalData.layout.modalCancel}} </button> </div> </form> </div> '},792:function(e){"use strict";e.exports=Roblox},5734:function(e){"use strict";e.exports=angular}},t={};function r(a){if(t[a])return t[a].exports;var n=t[a]={exports:{}};return e[a](n,n.exports,r),n.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e=r(5734),t=r.n(e),a=r(3544),n=r(2907);(0,a.importFilesUnderPath)(r(7308)),(0,a.importFilesUnderPath)(r(5855)),(0,a.importFilesUnderPath)(r(9503)),(0,a.importFilesUnderPath)(r(6211)),e=r(1943),(0,a.templateCacheGenerator)(t(),"aliasesAppTemplates",e),window.aliases=n.Z}()}(),window.Roblox&&window.Roblox.BundleDetector&&window.Roblox.BundleDetector.bundleDetected("Aliases");